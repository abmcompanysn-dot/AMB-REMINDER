<!doctypehtml><html lang=fr><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>ABM Reminder (version internationale)</title><meta name=description content="Système de rappels intelligent international avec IA et CallMeBot pour une gestion de temps efficace."><meta name=keywords content="rappel, reminder, ABM, gestion de temps, productivité, assistant personnel, CallMeBot, WhatsApp, PWA, organisation, agenda"><meta property=og:type content=website><meta property=og:title content="ABM Reminder (version internationale)"><meta property=og:description content="Système de rappels intelligent international avec IA et CallMeBot."><meta property=og:image content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj48Y2lyY2xlIGN4PSIyNTYiIGN5PSIyNTYiIHI9IjIxMy4zIiBmaWxsPSIjNjM2NmYxIi8+PHRleHQgeD0iMjU2IiB5PSIyNjYiIGZpbGw9IiNmZmZmZmYiIGZvbnQtc2l6ZT0iODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuKaoTwvdGV4dD48L3N2Zz4="><meta property=twitter:card content=summary_large_image><meta property=twitter:title content="ABM Reminder (version internationale)"><meta property=twitter:description content="Système de rappels intelligent international avec IA et CallMeBot."><meta property=twitter:image content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj48Y2lyY2xlIGN4PSIyNTYiIGN5PSIyNTYiIHI9IjIxMy4zIiBmaWxsPSIjNjM2NmYxIi8+PHRleHQgeD0iMjU2IiB5PSIyNjYiIGZpbGw9IiNmZmZmZmYiIGZvbnQtc2l6ZT0iODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuKaoTwvdGV4dD48L3N2Zz4="><link rel=manifest href="data:application/json;base64,ewogICJuYW1lIjogIkFCTSBSZW1pbmRlciAodmVyc2lvbiBpbnRlcm5hdGlvbmFsZSkiLAogICJzaG9ydF9uYW1lIjogIkFCTSBSZW1pbmRlciIsCiAgImRlc2NyaXB0aW9uIjogIlN5c3TDqG1lIGRlIHJhcHBlbHMgaW50ZWxsaWdlbnQgaW50ZXJuYXRpb25hbCBhdmVjIElBIGV0IENhbGxNZUJvdCIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjNjY3ZWVhIiwKICAidGhlbWVfY29sb3IiOiAiIzYzNjZmMSIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4TWpBaUlHaGxhV2RvZEQwaU1USXdJajQ4WTJseVkyeGxJR040UFNJMU1DSWdZM2s5SWpVd0lpQnlQU0kwTUNJZ1ptbHNiRDBpSXpZek5qWm1NU0l2UGp4MFpYaDBJSGc5SWpVd0lpQjVQU0kyTUNJZ1ptbHNiRDBpSXpkbVptWm1abVlpSUdadmJuUXRjMmw2WlQwaU1qQWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGlCQlFrMDhMM1JsZUhRK1BDOXpkbWMrIiwKICAgICAgInNpemVzIjogIjEyMHgxMjAiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhPVElpSUdobGFXZG9kRDBpTVRreUlqNDhZMmx5WTJ4bElHTjRQU0k1TmlJZ1kza2lQU0k1TmlJZ2NqMGlOekFpSUdacGJHdzlJaU0yTXpZMlpqRWlMejQ4ZEdWNGRDQjRQU0k1TmlJZ2VUMGlNVEF3SWlCbWFXeHNQU0lqTjJabVptWm1ZaUlnWm05dWRDMXphWHBsUFNJek1DSWdkR1Y0ZEMxaGJtTm9iM0k5SW0xcFpHUnNaU0lQaUZCQ1RUd3ZkR1Y0ZEQ0OEwzTjJaejQrIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSTFNVElpSUdobGFXZG9kRDBpTlRFeUlqNDhZMmx5WTJ4bElHTjRQU0kxTlRZaUlHTjVQU0kxTlRZaUlISTlJakl3TUNJZ1ptbHNiRDBpSXpZek5qWm1NU0l2UGp4eVpXTjBJSGc5SWpFd01DSWdlVDBpTVRBd0lpQjNhV1IwYUQwaU16RXlJaUJvWldsbmFIUTlJak14TWlJZ1ptbHNiRDBpSXpZM04yVmxZU0l2UGp4MFpYaDBJSGc5SWpJMU5pSWdlVDBpTWpVMklpQm1hV3hzUFNJak4yWm1abVptWWlJZ1ptOXVkQzF6YVhwbFBTSTBNQ0lnZEdWNGRDMWhibU5vYjNJOUltMXBaR1JzWlNJUGlGQkNUVHd2ZEdWNGRENDhMM04yWno0KyIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICA0Cn0="><meta name=theme-color content=#6366f1><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=default><meta name=apple-mobile-web-app-title content="RemindPro Max"><link rel=apple-touch-icon href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIj48Y2lyY2xlIGN4PSI5NiIgY3k9Ijk2IiByPSI4MCIgZmlsbD0iIzYzNjZmMSIvPjx0ZXh0IHg9Ijk2IiB5PSIxMDAiIGZpbGw9IiM3ZmZmZmYiIGZvbnQtc2l6ZT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuKaoeKaoeKaoTwvdGV4dD48L3N2Zz4="><script src=https://cdn.tailwindcss.com></script><script>tailwind.config={theme:{extend:{colors:{primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",dark:"#0f172a",light:"#f8fafc"}}}}</script><style>@import url(https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap);*{font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;-webkit-tap-highlight-color:transparent}html{scroll-behavior:smooth}body{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);min-height:100vh;overflow-x:hidden;-webkit-overflow-scrolling:touch}.mobile-card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,.1);border:1px solid rgba(255,255,255,.2)}.reminder-card{background:linear-gradient(135deg,rgba(255,255,255,.9),rgba(255,255,255,.8));backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.3);transition:all .3s ease;position:relative;overflow:hidden}.reminder-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#6366f1,#8b5cf6,#06b6d4);opacity:0;transition:opacity .3s ease}.reminder-card:active::before{opacity:1}.reminder-card:active{transform:scale(.98);box-shadow:0 4px 20px rgba(0,0,0,.15)}.priority-urgent{border-left:4px solid #ef4444}.priority-high{border-left:4px solid #f97316}.priority-normal{border-left:4px solid #3b82f6}.priority-low{border-left:4px solid #10b981}.mobile-input{background:rgba(255,255,255,.9);border:2px solid transparent;border-radius:12px;transition:all .3s ease;font-size:16px}.mobile-input:focus{background:#fff;border-color:#6366f1;box-shadow:0 0 0 4px rgba(99,102,241,.1)}.mobile-btn{background:linear-gradient(135deg,#6366f1,#8b5cf6);border:none;border-radius:12px;color:#fff;font-weight:600;transition:all .3s ease;position:relative;overflow:hidden;min-height:48px}.mobile-btn:active{transform:scale(.95)}.floating-add{position:fixed;bottom:95px;right:20px;width:60px;height:60px;background:linear-gradient(135deg,#6366f1,#8b5cf6);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;box-shadow:0 8px 25px rgba(99,102,241,.4);transition:all .3s ease;z-index:1000}.floating-add:active{transform:scale(.9)}.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-top:1px solid rgba(255,255,255,.2);padding:8px 0 calc(8px + env(safe-area-inset-bottom));z-index:100}.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;padding:8px;color:#6b7280;transition:all .3s ease;min-height:48px}.nav-item.active{color:#6366f1;background:rgba(99,102,241,.1);border-radius:12px}.nav-item:active{transform:scale(.95)}.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:flex-end;z-index:1000;opacity:0;visibility:hidden;transition:all .3s ease}.modal.active{opacity:1;visibility:visible}.modal-content{background:#fff;border-radius:20px 20px 0 0;padding:20px;width:100%;max-height:90vh;overflow-y:auto;transform:translateY(100%);transition:transform .3s ease}.modal.active .modal-content{transform:translateY(0)}.notification{position:fixed;top:20px;left:20px;right:20px;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:12px;padding:16px;box-shadow:0 8px 25px rgba(0,0,0,.1);z-index:2000;transform:translateY(-100px);opacity:0;transition:all .3s ease}.notification.show{transform:translateY(0);opacity:1}.swipe-actions{position:absolute;top:0;right:0;bottom:0;display:flex;align-items:center;background:linear-gradient(90deg,#10b981,#ef4444);border-radius:0 16px 16px 0;transform:translateX(100%);transition:transform .3s ease}.reminder-card.swiped .swipe-actions{transform:translateX(0)}.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.stat-card{background:rgba(255,255,255,.2);backdrop-filter:blur(20px);border-radius:16px;padding:16px;text-align:center;border:1px solid rgba(255,255,255,.3)}.category-icon{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;margin-right:8px}.category-tache .category-icon{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.category-rendez-vous .category-icon{background:linear-gradient(135deg,#10b981,#047857)}.category-priere .category-icon{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.category-messe .category-icon{background:linear-gradient(135deg,#d97706,#92400e)}.category-appel .category-icon{background:linear-gradient(135deg,#f59e0b,#d97706)}.category-sante .category-icon{background:linear-gradient(135deg,#ef4444,#dc2626)}.category-travail .category-icon{background:linear-gradient(135deg,#6366f1,#4f46e5)}.category-famille .category-icon{background:linear-gradient(135deg,#ec4899,#db2777)}.category-sport .category-icon{background:linear-gradient(135deg,#06b6d4,#0891b2)}.color-option{transition:all .3s ease;border:3px solid transparent}.color-option.selected{border-color:#374151;transform:scale(1.1);box-shadow:0 4px 12px rgba(0,0,0,.3)}.category-item{background:rgba(255,255,255,.9);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,.3);transition:all .3s ease}.category-item:hover{background:#fff;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.category-delete-btn{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none;border-radius:8px;padding:6px 12px;font-size:12px;font-weight:600;transition:all .3s ease}.category-delete-btn:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);transform:scale(1.05)}.category-delete-btn:active{transform:scale(.95)}.safe-top{padding-top:env(safe-area-inset-top)}.safe-bottom{padding-bottom:calc(80px + env(safe-area-inset-bottom))}footer{margin-bottom:80px}@media (max-width:768px){footer{margin-bottom:90px}}.haptic:active{animation:haptic .1s ease}@keyframes haptic{0%{transform:scale(1)}50%{transform:scale(.98)}100%{transform:scale(1)}}.quick-action{background:rgba(255,255,255,.2);backdrop-filter:blur(20px);border-radius:12px;padding:12px;margin:4px;border:1px solid rgba(255,255,255,.3);transition:all .3s ease}.quick-action:active{transform:scale(.95);background:rgba(255,255,255,.3)}</style><body class=safe-top><div class="px-4 py-6 text-center"><div class="inline-flex items-center justify-center w-16 h-16 rounded-full mobile-card mb-4 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-sm border border-white/30"><svg width=32 height=32 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/><circle cx=12 cy=12 r=3 fill=currentColor opacity=0.7 /><path d="M12 1l3.09 6.26L22 9l-5 4.87L18.18 21 12 17.77 5.82 21 7 13.87 2 9l6.91-1.74L12 1z"opacity=0.3 /></svg></div><h1 class="text-3xl font-black text-white mb-2 flex items-center justify-center space-x-2"><span>ABM Reminder</span><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=text-yellow-300><path d="M12 2l3.09 6.26L22 9l-5 4.87L18.18 21 12 17.77 5.82 21 7 13.87 2 9l6.91-1.74L12 2z"/></svg></h1><p class="text-white/80 text-sm font-medium">Version Internationale Professionnelle<div class="mt-2 p-2 bg-white/20 rounded-lg backdrop-blur-sm"><div class="current-time text-white font-mono text-lg font-bold"></div><div class="text-white/70 text-xs"id=refreshStatus>🔄 Actualisation ultra-rapide active (10ms)</div></div><div class="mt-2 p-2 bg-white/10 rounded-lg backdrop-blur-sm"><div class="text-white/90 text-xs font-semibold mb-1">🚀 Système Arrière-Plan</div><div class="grid grid-cols-2 gap-2 text-xs"><div class="bg-white/10 rounded px-2 py-1"><div class=text-white/70>Vérifications</div><div class="text-white font-bold"id=backgroundChecks>0</div></div><div class="bg-white/10 rounded px-2 py-1"><div class=text-white/70>Queue</div><div class="text-white font-bold"id=backgroundQueue>0</div></div><div class="bg-white/10 rounded px-2 py-1"><div class=text-white/70>Envois OK</div><div class="text-green-300 font-bold"id=backgroundSuccess>0</div></div><div class="bg-white/10 rounded px-2 py-1"><div class=text-white/70>Échecs</div><div class="text-red-300 font-bold"id=backgroundFails>0</div></div></div><div class="mt-1 text-xs text-white/60"id=backgroundStatus>🟢 Tous les workers actifs</div></div><div id=installPrompt class=mt-4><div class="bg-white/20 backdrop-blur-sm rounded-2xl p-4 border border-white/30"><div class="text-center mb-3"><div class="text-4xl mb-2">📱</div><h3 class="text-white font-bold text-lg">Installer ABM Reminder</h3><p class="text-white/80 text-sm">Accès rapide depuis votre écran d'accueil</div><button id=installButton class="mobile-btn w-full py-4 text-lg font-bold haptic bg-gradient-to-r from-green-500 to-blue-500 shadow-lg"><div class="flex items-center justify-center space-x-2"><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg><span>Installer sur l'Écran d'Accueil</span></div></button><div class="mt-3 text-center"><div class="flex items-center justify-center space-x-4 text-white/70 text-xs"><div class="flex items-center space-x-1"><svg width=16 height=16 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg><span>Accès rapide</span></div><div class="flex items-center space-x-1"><svg width=16 height=16 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg><span>Hors ligne</span></div><div class="flex items-center space-x-1"><svg width=16 height=16 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg><span>Notifications</span></div></div></div></div></div><div class="stats-grid mt-6"><div class=stat-card><div class="text-2xl font-bold text-white"id=totalReminders>0</div><div class="text-white/80 text-xs">Actifs</div></div><div class=stat-card><div class="text-2xl font-bold text-white"id=todayCount>0</div><div class="text-white/80 text-xs">Aujourd'hui</div></div><div class=stat-card><div class="text-2xl font-bold text-white"id=callMeBotSent>0</div><div class="text-white/80 text-xs">📲 CallMeBot</div></div><div class=stat-card><div class="text-2xl font-bold text-white"id=totalSent>0</div><div class="text-white/80 text-xs">📊 Total Envoyés</div></div></div></div><div class="px-4 mb-6"><div class="mobile-card p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-lg font-bold text-gray-800 flex items-center"><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class="text-blue-600 mr-2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg><span>Assistant IA Intelligent</span></h3><button id=aiToggle class="p-2 rounded-full bg-blue-100 hover:bg-blue-200 transition-colors haptic"onclick=toggleAI()><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-blue-600><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg></button></div><div id=aiPanel class=space-y-3><div id=aiSuggestions class=space-y-2></div><div class="flex space-x-2"><button class="mobile-btn flex-1 py-3 haptic"onclick=showSmartScheduler()><div class="flex items-center justify-center space-x-2"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg><span>Programmation Rapide</span></div></button></div><div class=relative><div class="absolute left-3 top-1/2 transform -translate-y-1/2"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-gray-400><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg></div><input id=aiInput placeholder="Écrivez ce que vous voulez programmer..."class="mobile-input w-full pl-12 pr-12 py-3"onkeypress=handleAIInput(event)><button class="absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded-full bg-blue-500 hover:bg-blue-600 transition-colors haptic"onclick=processAIInput()><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button></div><div class="grid grid-cols-2 gap-2"><button class="quick-action text-xs py-2 haptic"onclick='applySmartPattern("morning")'>🌅 Routine Matinale</button><button class="quick-action text-xs py-2 haptic"onclick='applySmartPattern("work")'>💼 Journée Travail</button><button class="quick-action text-xs py-2 haptic"onclick='applySmartPattern("health")'>🏥 Suivi Santé</button><button class="quick-action text-xs py-2 haptic"onclick='applySmartPattern("spiritual")'>🙏 Vie Spirituelle</button></div></div></div></div><div class="px-4 mb-6"><div class="flex space-x-2 overflow-x-auto pb-2"><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("priere")'><span>🙏</span><span class="text-white text-sm font-medium">Prière</span></button><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("messe")'><span>⛪</span><span class="text-white text-sm font-medium">Messe</span></button><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("sante")'><span>🏥</span><span class="text-white text-sm font-medium">Santé</span></button><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("travail")'><span>💼</span><span class="text-white text-sm font-medium">Travail</span></button><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("famille")'><span>👨‍👩‍👧‍👦</span><span class="text-white text-sm font-medium">Famille</span></button><button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic"onclick='showAddModal("sport")'><span>🏃‍♂️</span><span class="text-white text-sm font-medium">Sport</span></button></div></div><div class="px-4 safe-bottom"><div class="mobile-card p-4 mb-6"><div class=relative><div class="absolute left-3 top-1/2 transform -translate-y-1/2"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-gray-400><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><input id=searchInput placeholder="Rechercher vos rappels..."class="mobile-input w-full pl-12 pr-12 py-3"><button class="absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 transition-colors"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-gray-400><path d="M12 2l3.09 6.26L22 9l-5 4.87L18.18 21 12 17.77 5.82 21 7 13.87 2 9l6.91-1.74L12 2z"/></svg></button></div></div><div id=remindersList class=space-y-4></div><div id=emptyState class="text-center py-12 hidden"><div class="w-24 h-24 mx-auto mb-4 rounded-full mobile-card flex items-center justify-center bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-sm border border-white/30"><svg width=48 height=48 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M12 2l3.09 6.26L22 9l-5 4.87L18.18 21 12 17.77 5.82 21 7 13.87 2 9l6.91-1.74L12 2z"/></svg></div><h3 class="text-xl font-bold text-white mb-2">Prêt à commencer ?</h3><p class="text-white/80 mb-6">Créez votre premier rappel intelligent avec l'IA</p><button class="mobile-btn px-6 py-3 haptic"onclick=showAddModal()><div class="flex items-center justify-center space-x-2"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg><span>Nouveau Rappel</span></div></button></div><div id=statsPage class=hidden><div class="mobile-card p-6 mb-6"><h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class=mr-2>📊</span>Statistiques Détaillées</h2><div class="grid grid-cols-2 gap-4 mb-6"><div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white"><div class="text-2xl font-bold"id=statsTotal>0</div><div class="text-sm opacity-90">Total Rappels</div></div><div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white"><div class="text-2xl font-bold"id=statsSent>0</div><div class="text-sm opacity-90">Envoyés</div></div><div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-4 text-white"><div class="text-2xl font-bold"id=statsPending>0</div><div class="text-sm opacity-90">En Attente</div></div><div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white"><div class="text-2xl font-bold"id=statsCompleted>0</div><div class="text-sm opacity-90">Terminés</div></div></div><div class=mb-4><div class="flex space-x-2 overflow-x-auto pb-2"><button onclick='filterStats("all")'class="stats-filter-btn active px-4 py-2 bg-blue-500 text-white rounded-lg text-sm whitespace-nowrap haptic">📊 Tous</button><button onclick='filterStats("sent")'class="stats-filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm whitespace-nowrap haptic">✅ Envoyés</button><button onclick='filterStats("pending")'class="stats-filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm whitespace-nowrap haptic">⏳ En Attente</button><button onclick='filterStats("completed")'class="stats-filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm whitespace-nowrap haptic">🎉 Terminés</button><button onclick='filterStats("callmebot")'class="stats-filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm whitespace-nowrap haptic">📲 CallMeBot</button></div></div><div class="bg-white rounded-lg border border-gray-200 overflow-hidden"><div class=overflow-x-auto><table class="w-full text-sm"><thead class=bg-gray-50><tr><th class="px-3 py-3 text-left font-semibold text-gray-700">📋 Rappel<th class="px-3 py-3 text-left font-semibold text-gray-700">📅 Date/Heure<th class="px-3 py-3 text-left font-semibold text-gray-700">🎯 Catégorie<th class="px-3 py-3 text-left font-semibold text-gray-700">⚡ Priorité<th class="px-3 py-3 text-left font-semibold text-gray-700">📤 Statut Envoi<th class="px-3 py-3 text-left font-semibold text-gray-700">📲 Mode<th class="px-3 py-3 text-left font-semibold text-gray-700">✅ État<tbody id=statsTableBody></table></div></div><div class=mt-6><h3 class="text-lg font-semibold text-gray-700 mb-3">📊 Répartition par Catégorie</h3><div id=categoryStats class=space-y-2></div></div><div class=mt-6><h3 class="text-lg font-semibold text-gray-700 mb-3">📤 Modes d'Envoi</h3><div class="grid grid-cols-2 gap-4"><div class="bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-center justify-between"><div><div class="text-lg font-bold text-green-700"id=callmebotCount>0</div><div class="text-sm text-green-600">📲 CallMeBot WhatsApp</div></div><div class=text-2xl>📲</div></div></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-center justify-between"><div><div class="text-lg font-bold text-blue-700"id=browserCount>0</div><div class="text-sm text-blue-600">🌐 Navigateur</div></div><div class=text-2xl>🌐</div></div></div></div></div><div class=mt-6><h3 class="text-lg font-semibold text-gray-700 mb-3">🔧 Actions Rapides</h3><div class="grid grid-cols-2 gap-3"><button onclick=exportStats() class="mobile-btn py-3 haptic bg-blue-500">📊 Exporter Stats</button><button onclick=resetStats() class="mobile-btn py-3 haptic bg-red-500">🗑️ Reset Stats</button><button onclick=refreshStats() class="mobile-btn py-3 haptic bg-green-500">🔄 Actualiser</button><button onclick=printStats() class="mobile-btn py-3 haptic bg-purple-500">🖨️ Imprimer</button></div></div></div></div><div id=settingsPage class=hidden><div class="mobile-card p-6 mb-6"><h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class=mr-2>📲</span>Configuration CallMeBot WhatsApp (GRATUIT)</h2><div class="space-y-4 mb-6"><h3 class="text-lg font-semibold text-gray-700 flex items-center"><span class=mr-2>📲</span>Configuration CallMeBot WhatsApp (GRATUIT)</h3><div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4"><h4 class="font-bold text-green-800 mb-3 flex items-center"><span class=mr-2>📋</span>Instructions d'installation CallMeBot :</h4><div class="space-y-4 text-sm text-green-700"><div class="bg-white rounded-lg p-3 border border-green-100"><h5 class="font-semibold mb-2">✅ 1. Autoriser CallMeBot à t'envoyer des messages</h5><ul class=space-y-2><li class="flex items-start"><span class=mr-2>📱</span><div><strong>Ajoute ce numéro à tes contacts WhatsApp :</strong><br><span class="bg-green-100 px-2 py-1 rounded font-mono text-lg">+34 694 26 48 06</span><br><em>(Nom suggéré : CallMeBot WhatsApp)</em></div><li class="flex items-start"><span class=mr-2>💬</span><div><strong>Envoie ce message à ce contact :</strong><br><span class="bg-green-100 px-2 py-1 rounded font-mono">I allow callmebot to send me messages</span></div><li class="flex items-start"><span class=mr-2>📩</span><div><strong>Tu recevras automatiquement ton API Key personnelle en retour</strong><br><em>Copie cette clé et colle-la dans le champ ci-dessous</em></div></ul></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-3"><h5 class="font-semibold text-blue-800 mb-2">💡 Pourquoi CallMeBot ?</h5><ul class="list-disc list-inside space-y-1 text-blue-700"><li>✅ Complètement GRATUIT<li>✅ Aucune inscription complexe<li>✅ Envoi automatique de rappels WhatsApp<li>✅ Fonctionne immédiatement<li>✅ Pas de limite de messages</ul></div></div></div><div><label class="block text-sm font-medium text-gray-700 mb-2">📞 Votre numéro WhatsApp</label><input type=tel id=callMeBotNumber placeholder="+33 6 12 34 56 78"class="mobile-input w-full px-4 py-3"><p class="text-xs text-gray-500 mt-1">Format international avec indicatif pays (ex: +33 pour France)</div><div><label class="block text-sm font-medium text-gray-700 mb-2">🔑 API Key CallMeBot</label><input id=callMeBotApiKey placeholder="Collez ici votre API Key reçue par WhatsApp"class="mobile-input w-full px-4 py-3"><p class="text-xs text-gray-500 mt-1">Clé reçue automatiquement après avoir envoyé le message d'autorisation</div><div class="flex items-center space-x-3"><input type=checkbox id=enableCallMeBot class="w-5 h-5 text-primary rounded"><label for=enableCallMeBot class="text-sm font-medium text-gray-700">Activer les rappels WhatsApp automatiques via CallMeBot</label></div></div><div class="space-y-4 mb-6"><h3 class="text-lg font-semibold text-gray-700 flex items-center"><span class=mr-2>🔔</span>Préférences de Notification</h3><div class=space-y-3><label class="flex items-center space-x-3"><input type=checkbox id=notifyCallMeBot class="w-5 h-5 text-primary rounded"checked><span class=text-sm>📲 Envoyer sur WhatsApp via CallMeBot</span></label><label class="flex items-center space-x-3"><input type=checkbox id=notifyBrowser class="w-5 h-5 text-primary rounded"checked><span class=text-sm>🌐 Notification navigateur</span></label></div></div><div class="space-y-4 mb-6"><h3 class="text-lg font-semibold text-gray-700 flex items-center"><span class=mr-2>📝</span>Message Personnalisé CallMeBot</h3><div><label class="block text-sm font-medium text-gray-700 mb-2">📲 Message WhatsApp CallMeBot</label><textarea id=callMeBotTemplate rows=4 class="mobile-input w-full px-4 py-3 resize-none"placeholder="🔔 Rappel ABM Reminder📋 {titre}
📅 Prévu pour: {heure}
📍 Lieu: {lieu}
⚡ Envoyé automatiquement">🔔 Rappel ABM Reminder
📋 {titre}
📅 Prévu pour: {heure}
📍 Lieu: {lieu}
⚡ Envoyé automatiquement</textarea><p class="text-xs text-gray-500 mt-1">Variables disponibles: {titre}, {heure}, {lieu}</div></div><button onclick=saveSettings() class="mobile-btn w-full py-4 text-lg font-bold haptic">💾 Sauvegarder la Configuration</button><div class=mt-4><button onclick=testCallMeBot() class="mobile-btn w-full py-4 haptic bg-green-500 text-lg font-bold">📲 Test CallMeBot WhatsApp</button></div></div><div class="mobile-card p-6 mb-6"><h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class=mr-2>🗂️</span>Gestion des Catégories</h2><div class=space-y-4><div><h3 class="text-lg font-semibold text-gray-700 mb-3">➕ Ajouter une Catégorie</h3><div class=space-y-3><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">📝 Nom de la catégorie</label><input id=newCategoryName placeholder="Ex: Loisirs, Études..."class="mobile-input w-full px-4 py-3"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">🎨 Emoji/Icône</label><input id=newCategoryIcon placeholder=🎮 maxlength=2 class="mobile-input w-full px-4 py-3 text-center text-xl"></div></div><div><label class="block text-sm font-medium text-gray-700 mb-2">🌈 Couleur</label><div class="grid grid-cols-6 gap-2"><button type=button class="color-option w-10 h-10 rounded-lg bg-red-500"data-color=red onclick='selectCategoryColor("red")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-blue-500"data-color=blue onclick='selectCategoryColor("blue")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-green-500"data-color=green onclick='selectCategoryColor("green")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-yellow-500"data-color=yellow onclick='selectCategoryColor("yellow")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-purple-500"data-color=purple onclick='selectCategoryColor("purple")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-pink-500"data-color=pink onclick='selectCategoryColor("pink")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-indigo-500"data-color=indigo onclick='selectCategoryColor("indigo")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-orange-500"data-color=orange onclick='selectCategoryColor("orange")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-teal-500"data-color=teal onclick='selectCategoryColor("teal")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-cyan-500"data-color=cyan onclick='selectCategoryColor("cyan")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-gray-500"data-color=gray onclick='selectCategoryColor("gray")'></button><button type=button class="color-option w-10 h-10 rounded-lg bg-emerald-500"data-color=emerald onclick='selectCategoryColor("emerald")'></button></div><input type=hidden id=selectedCategoryColor value=blue></div><button onclick=addCustomCategory() class="mobile-btn w-full py-3 haptic bg-green-500">➕ Créer la Catégorie</button></div></div><div><h3 class="text-lg font-semibold text-gray-700 mb-3">📋 Catégories Existantes</h3><div id=categoriesList class=space-y-2></div></div></div></div><div class="mobile-card p-6 mb-6"><h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class=mr-2>🗑️</span>Gestion des Rappels</h2><div class=space-y-4><div><h3 class="text-lg font-semibold text-gray-700 mb-3">🗂️ Supprimer par Catégorie</h3><div class="grid grid-cols-2 gap-2"><button onclick='mobileSystem.bulkDeleteByCategory("priere")'class="quick-action text-xs py-2 haptic bg-purple-100 text-purple-700">🙏 Prières</button><button onclick='mobileSystem.bulkDeleteByCategory("messe")'class="quick-action text-xs py-2 haptic bg-orange-100 text-orange-700">⛪ Messes</button><button onclick='mobileSystem.bulkDeleteByCategory("sante")'class="quick-action text-xs py-2 haptic bg-red-100 text-red-700">🏥 Santé</button><button onclick='mobileSystem.bulkDeleteByCategory("travail")'class="quick-action text-xs py-2 haptic bg-blue-100 text-blue-700">💼 Travail</button><button onclick='mobileSystem.bulkDeleteByCategory("famille")'class="quick-action text-xs py-2 haptic bg-pink-100 text-pink-700">👨‍👩‍👧‍👦 Famille</button><button onclick='mobileSystem.bulkDeleteByCategory("sport")'class="quick-action text-xs py-2 haptic bg-cyan-100 text-cyan-700">🏃‍♂️ Sport</button></div></div><div><h3 class="text-lg font-semibold text-gray-700 mb-3">⚡ Supprimer par Priorité</h3><div class="grid grid-cols-2 gap-2"><button onclick='mobileSystem.bulkDeleteByPriority("basse")'class="quick-action text-xs py-2 haptic bg-green-100 text-green-700">🟢 Priorité Basse</button><button onclick='mobileSystem.bulkDeleteByPriority("normale")'class="quick-action text-xs py-2 haptic bg-yellow-100 text-yellow-700">🟡 Priorité Normale</button><button onclick='mobileSystem.bulkDeleteByPriority("haute")'class="quick-action text-xs py-2 haptic bg-orange-100 text-orange-700">🔴 Priorité Haute</button><button onclick='mobileSystem.bulkDeleteByPriority("urgente")'class="quick-action text-xs py-2 haptic bg-red-100 text-red-700">🚨 Priorité Urgente</button></div></div><div><h3 class="text-lg font-semibold text-gray-700 mb-3">🧹 Nettoyage Général</h3><div class=space-y-2><button onclick=mobileSystem.deleteCompletedReminders() class="mobile-btn w-full py-3 haptic bg-blue-500">🧹 Supprimer les Rappels Terminés</button><button onclick=mobileSystem.deleteAllReminders() class="mobile-btn w-full py-3 haptic bg-red-500">⚠️ SUPPRIMER TOUS LES RAPPELS</button></div><div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"><p class="text-xs text-yellow-700">⚠️<strong>Attention :</strong>Les suppressions sont définitives et ne peuvent pas être annulées. Assurez-vous de bien vouloir supprimer les rappels avant de confirmer.</div></div></div></div><div class="mobile-card p-4"><h3 class="text-lg font-semibold text-gray-700 mb-3 flex items-center"><span class=mr-2>📊</span>État des Connexions</h3><div class=space-y-3><div class="flex items-center justify-between"><span class="text-sm text-gray-600">CallMeBot WhatsApp</span><span id=callMeBotStatus class="px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">Non configuré</span></div><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Stockage Local</span><span class="px-3 py-1 bg-green-100 text-green-600 text-xs rounded-full">✅ Actif</span></div></div></div></div></div><footer class="bg-gradient-to-r from-gray-900 to-gray-800 text-white py-8 mt-12"><div class="max-w-6xl mx-auto px-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div class="text-center md:text-left"><div class="flex items-center justify-center md:justify-start mb-4"><div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-3"><span class="text-xl font-bold">🏢</span></div><div><h3 class="text-xl font-bold text-white">Africa Business Manager</h3><p class="text-blue-300 text-sm font-medium">COMPANY</div></div><p class="text-gray-300 text-sm leading-relaxed">Solutions technologiques innovantes pour l'Afrique moderne. Développement d'applications mobiles et systèmes de gestion intelligents.</div><div class="text-center md:text-left"><h4 class="text-lg font-semibold text-white mb-4 flex items-center justify-center md:justify-start"><span class=mr-2>🚀</span>Nos Services</h4><ul class="space-y-2 text-gray-300 text-sm"><li class="flex items-center justify-center md:justify-start"><span class=mr-2>📱</span>Applications Mobiles<li class="flex items-center justify-center md:justify-start"><span class=mr-2>💼</span>Gestion d'Entreprise<li class="flex items-center justify-center md:justify-start"><span class=mr-2>🤖</span>Intelligence Artificielle<li class="flex items-center justify-center md:justify-start"><span class=mr-2>☁️</span>Solutions Cloud</ul></div><div class="text-center md:text-left"><h4 class="text-lg font-semibold text-white mb-4 flex items-center justify-center md:justify-start"><span class=mr-2>📞</span>Contact & Réseaux</h4><div class="space-y-3 text-gray-300 text-sm"><div class="flex items-center justify-center md:justify-start"><span class=mr-2>🌍</span><span>Sénégal - Solutions Globales</span></div><div class="flex items-center justify-center md:justify-start"><span class=mr-2>📧</span><span>abmcompanysn@gmail.com</span></div><div class="flex items-center justify-center md:justify-start"><span class=mr-2>📱</span><span>+221 76 904 79 99</span></div><div class="flex items-center justify-center md:justify-start"><span class=mr-2>💬</span><span>WhatsApp Business</span></div><div class="flex items-center justify-center md:justify-start"><span class=mr-2>📺</span><span>Chaîne YouTube Officielle</span></div><div class="flex items-center justify-center md:justify-start"><span class=mr-2>🎵</span><span>TikTok @tech_sn_abmcompany</span></div></div></div></div><div class="border-t border-gray-700 mt-8 pt-6"><div class="flex flex-col md:flex-row justify-between items-center"><div class="text-center md:text-left mb-4 md:mb-0"><p class="text-gray-400 text-sm">© 2024<strong class=text-white>Africa Business Manager COMPANY</strong>. Tous droits réservés.<p class="text-gray-500 text-xs mt-1">ABM Reminder - Système de Rappels International v2.0</div><div class="flex flex-wrap gap-3 justify-center md:justify-end"><a href=https://www.facebook.com/share/p/175J3K475H/ target=_blank class="w-12 h-12 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a><a href=https://www.tiktok.com/@tech_sn_abmcompany target=_blank class="w-12 h-12 bg-black hover:bg-gray-800 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></a><a href=https://www.youtube.com/@CompanyABM target=_blank class="w-12 h-12 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a><a href=https://wa.me/221769047999 target=_blank class="w-12 h-12 bg-green-600 hover:bg-green-700 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"/></svg></a><a href=mailto:abmcompanysn@gmail.com class="w-12 h-12 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.91L12 10.09l9.455-6.269h.909c.904 0 1.636.732 1.636 1.636z"/></svg></a></div></div></div><div class="text-center mt-8 mb-6"><h3 class="text-xl font-bold text-white mb-4">🌐 Rejoignez Notre Communauté</h3><div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 max-w-4xl mx-auto"><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="bg-green-500/20 rounded-xl p-4 border border-green-400/30"><div class="text-4xl mb-3"><svg width=40 height=40 viewBox="0 0 24 24"fill=currentColor class=text-green-400><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"/></svg></div><h4 class="font-bold text-white mb-2">WhatsApp Business</h4><p class="text-green-200 text-sm mb-3">Rejoignez notre chaîne officielle</p><a href=https://whatsapp.com/channel/0029VbAwuPc5kg6yWk69Ij0v target=_blank class="inline-block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105">📱 Notre Chaîne WhatsApp</a></div><div class="bg-red-500/20 rounded-xl p-4 border border-red-400/30"><div class="text-4xl mb-3"><svg width=40 height=40 viewBox="0 0 24 24"fill=currentColor class=text-red-400><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></div><h4 class="font-bold text-white mb-2">YouTube</h4><p class="text-red-200 text-sm mb-3">Tutoriels et démonstrations</p><a href=https://www.youtube.com/@CompanyABM target=_blank class="inline-block bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105">🎬 Notre Chaîne</a></div><div class="bg-gray-800/40 rounded-xl p-4 border border-gray-600/30"><div class="text-4xl mb-3"><svg width=40 height=40 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></div><h4 class="font-bold text-white mb-2">TikTok</h4><p class="text-gray-200 text-sm mb-3">Contenus tech et innovations</p><a href=https://www.tiktok.com/@tech_sn_abmcompany target=_blank class="inline-block bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105">🎭 @tech_sn_abmcompany</a></div></div><div class="mt-6 p-4 bg-purple-500/20 rounded-xl border border-purple-400/30"><div class="flex items-center justify-center space-x-4"><span class=text-3xl>📧</span><div class=text-center><h4 class="font-bold text-white">Contact Professionnel</h4><a href=mailto:abmcompanysn@gmail.com class="text-purple-200 hover:text-white transition-colors duration-300 font-medium">abmcompanysn@gmail.com</a></div></div></div></div></div><div class="text-center mt-6"><div class="inline-flex items-center bg-gradient-to-r from-green-500 to-blue-500 text-white px-4 py-2 rounded-full text-sm font-medium"><span class=mr-2>🏆</span>Technologie Sénégalaise de Qualité Internationale<span class=ml-2>⭐</span></div></div></div></footer><div class=bottom-nav><div class=flex><button class="nav-item active haptic"onclick='switchTab("home")'><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=mb-1><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span class="text-xs font-medium">Accueil</span></button><button class="nav-item haptic"onclick='switchTab("today")'><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=mb-1><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg><span class="text-xs font-medium">Aujourd'hui</span></button><button class="nav-item haptic"onclick='switchTab("stats")'><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=mb-1><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/></svg><span class="text-xs font-medium">Statistiques</span></button><button class="nav-item haptic"onclick='switchTab("settings")'><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor class=mb-1><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg><span class="text-xs font-medium">Paramètres</span></button></div></div><button class="floating-add haptic"onclick=showAddModal()><svg width=28 height=28 viewBox="0 0 24 24"fill=currentColor class=text-white><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></button><div id=smartSchedulerModal class=modal><div class=modal-content><div class="flex items-center justify-between mb-6"><h2 class="text-xl font-bold flex items-center"><span class=mr-2>⚡</span>Programmation Intelligente</h2><button onclick=hideSmartScheduler() class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center haptic">✕</button></div><div id=aiAnalysis class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-6"><h3 class="font-semibold text-gray-800 mb-2 flex items-center"><span class=mr-2>🧠</span>Analyse IA de votre demande</h3><div id=analysisResult class="text-sm text-gray-600">L'IA analysera votre demande ici...</div></div><div id=smartSuggestions class="space-y-3 mb-6"></div><div class="flex space-x-2 mb-4"><button onclick=acceptAllSuggestions() class="mobile-btn flex-1 py-3 haptic bg-green-500">✅ Tout Accepter</button><button onclick=customizeSchedule() class="mobile-btn flex-1 py-3 haptic bg-blue-500">⚙️ Personnaliser</button></div></div></div><div id=addModal class=modal><div class=modal-content><div class="flex items-center justify-between mb-6"><h2 class="text-xl font-bold">Nouveau Rappel</h2><button onclick=hideAddModal() class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center haptic">✕</button></div><form id=reminderForm class=space-y-4><div><label class="block text-sm font-medium text-gray-700 mb-2">💭 Description</label><input id=reminderText placeholder="Que voulez-vous vous rappeler ?"class="mobile-input w-full px-4 py-3"></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">📅 Date</label><input type=date id=reminderDate class="mobile-input w-full px-4 py-3"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">⏰ Heure</label><input type=time id=reminderTime class="mobile-input w-full px-4 py-3"></div></div><div><label class="block text-sm font-medium text-gray-700 mb-2">🎯 Catégorie</label><select id=reminderCategory class="mobile-input w-full px-4 py-3"><option value=tache>📋 Tâche<option value=rendez-vous>📅 Rendez-vous<option value=priere>🙏 Prière Chrétienne<option value=messe>⛪ Messe/Culte<option value=appel>📞 Appel<option value=sante>🏥 Santé<option value=travail>💼 Travail<option value=famille>👨‍👩‍👧‍👦 Famille<option value=sport>🏃‍♂️ Sport</select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">⚡ Priorité</label><select id=reminderPriority class="mobile-input w-full px-4 py-3"><option value=basse>🟢 Basse<option value=normale selected>🟡 Normale<option value=haute>🔴 Haute<option value=urgente>🚨 Urgente</select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">📍 Lieu (optionnel)</label><div class="flex space-x-2"><input id=reminderLocation placeholder="Où ?"class="mobile-input flex-1 px-4 py-3"><button type=button onclick=getLocation() class="mobile-btn px-4 py-3 haptic">📍</button></div></div><div class=space-y-4><div class="flex items-center space-x-3"><input type=checkbox id=isRecurring class="w-5 h-5 text-primary rounded"onchange=toggleRecurringOptions()><label for=isRecurring class="text-sm font-medium text-gray-700">🔄 Rappel récurrent (répétition automatique)</label></div><div id=recurringOptions class="space-y-4 hidden"><div><label class="block text-sm font-medium text-gray-700 mb-2">🔁 Fréquence</label><select id=recurringType class="mobile-input w-full px-4 py-3"onchange=updateRecurringOptions()><option value=daily>📅 Tous les jours<option value=weekly>📆 Chaque semaine<option value=monthly>🗓️ Chaque mois<option value=yearly>📅 Chaque année<option value=custom>⚙️ Personnalisé</select></div><div id=weeklyOptions class=hidden><label class="block text-sm font-medium text-gray-700 mb-2">📅 Jours de la semaine</label><div class="grid grid-cols-7 gap-2"><label class="flex flex-col items-center"><input type=checkbox value=1 class="recurring-days mb-1"><span class=text-xs>Lun</span></label><label class="flex flex-col items-center"><input type=checkbox value=2 class="recurring-days mb-1"><span class=text-xs>Mar</span></label><label class="flex flex-col items-center"><input type=checkbox value=3 class="recurring-days mb-1"><span class=text-xs>Mer</span></label><label class="flex flex-col items-center"><input type=checkbox value=4 class="recurring-days mb-1"><span class=text-xs>Jeu</span></label><label class="flex flex-col items-center"><input type=checkbox value=5 class="recurring-days mb-1"><span class=text-xs>Ven</span></label><label class="flex flex-col items-center"><input type=checkbox value=6 class="recurring-days mb-1"><span class=text-xs>Sam</span></label><label class="flex flex-col items-center"><input type=checkbox value=0 class="recurring-days mb-1"><span class=text-xs>Dim</span></label></div></div><div id=customOptions class="hidden space-y-3"><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">🔢 Répéter tous les</label><input type=number id=customInterval min=1 max=365 value=1 class="mobile-input w-full px-4 py-3"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">📊 Unité</label><select id=customUnit class="mobile-input w-full px-4 py-3"><option value=days>Jour(s)<option value=weeks>Semaine(s)<option value=months>Mois<option value=years>Année(s)</select></div></div></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">📅 Date de fin</label><input type=date id=recurringEndDate class="mobile-input w-full px-4 py-3"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">🔢 Ou nombre max</label><input type=number id=maxOccurrences min=1 max=1000 placeholder=∞ class="mobile-input w-full px-4 py-3"></div></div><div id=recurringPreview class="bg-gray-50 rounded-lg p-3"><h4 class="text-sm font-medium text-gray-700 mb-2">👀 Aperçu des prochains rappels :</h4><div id=previewList class="text-xs text-gray-600 space-y-1"></div></div></div></div><div class=space-y-4><div class="flex items-center space-x-3"><input type=checkbox id=sendToWhatsApp class="w-5 h-5 text-primary rounded"><label for=sendToWhatsApp class="text-sm font-medium text-gray-700">📱 Envoyer automatiquement sur WhatsApp</label></div><div class="flex items-center space-x-3"><input type=checkbox id=advanceNotice class="w-5 h-5 text-primary rounded"onchange=toggleAdvanceOptions()><label for=advanceNotice class="text-sm font-medium text-gray-700">⏰ Rappel à l'avance</label></div><div id=advanceOptions class="hidden space-y-3"><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">⏱️ Temps avant</label><input type=number id=advanceTime min=1 max=1440 value=15 class="mobile-input w-full px-4 py-3"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">📊 Unité</label><select id=advanceUnit class="mobile-input w-full px-4 py-3"><option value=minutes>Minutes<option value=hours>Heures<option value=days>Jours</select></div></div></div></div><button type=submit class="mobile-btn w-full py-4 text-lg font-bold haptic">🚀 Créer le Rappel Programmé</button></form></div></div><div id=notification class=notification><div class="flex items-center space-x-3"><span id=notificationIcon class=text-xl></span><div class=flex-1><div id=notificationTitle class=font-medium></div><div id=notificationMessage class="text-sm text-gray-600"></div></div><button onclick=hideNotification() class="text-gray-400 haptic">✕</button></div></div><script>class MobileRemindSystem{constructor(){this.reminders=JSON.parse(localStorage.getItem("mobile_reminders"))||[],this.completedReminders=JSON.parse(localStorage.getItem("mobile_completed"))||[],this.currentTab="home",this.currentFilter="",this.christianVerses=["Je puis tout par celui qui me fortifie. (Philippiens 4:13)","L'Éternel est mon berger: je ne manquerai de rien. (Psaume 23:1)","Venez à moi, vous tous qui êtes fatigués et chargés, et je vous donnerai du repos. (Matthieu 11:28)","Car je connais les projets que j'ai formés sur vous, dit l'Éternel, projets de paix et non de malheur. (Jérémie 29:11)","Ne vous inquiétez de rien; mais en toute chose faites connaître vos besoins à Dieu par des prières. (Philippiens 4:6)","Celui qui demeure sous l'abri du Très-Haut repose à l'ombre du Tout-Puissant. (Psaume 91:1)","Car Dieu n'est pas un Dieu de désordre, mais de paix. (1 Corinthiens 14:33)","Remets ton sort à l'Éternel, et il te soutiendra. (Psaume 55:22)"],this.settings=JSON.parse(localStorage.getItem("mobile_settings"))||{callMeBotNumber:"",callMeBotApiKey:"",enableCallMeBot:!1,notifyCallMeBot:!0,notifyBrowser:!0,callMeBotTemplate:"🔔 Rappel ABM Reminder\n📋 {titre}\n📅 Prévu pour: {heure}\n📍 Lieu: {lieu}\n⚡ Envoyé automatiquement"},this.customCategories=JSON.parse(localStorage.getItem("mobile_custom_categories"))||[],this.defaultCategories=[{id:"tache",name:"Tâche",icon:"📋",color:"blue",deletable:!1},{id:"rendez-vous",name:"Rendez-vous",icon:"📅",color:"green",deletable:!1},{id:"priere",name:"Prière Chrétienne",icon:"🙏",color:"purple",deletable:!1},{id:"messe",name:"Messe/Culte",icon:"⛪",color:"orange",deletable:!1},{id:"appel",name:"Appel",icon:"📞",color:"yellow",deletable:!1},{id:"sante",name:"Santé",icon:"🏥",color:"red",deletable:!1},{id:"travail",name:"Travail",icon:"💼",color:"indigo",deletable:!1},{id:"famille",name:"Famille",icon:"👨‍👩‍👧‍👦",color:"pink",deletable:!1},{id:"sport",name:"Sport",icon:"🏃‍♂️",color:"cyan",deletable:!1}],this.messageStats=JSON.parse(localStorage.getItem("mobile_message_stats"))||{callMeBotSent:0,totalSent:0},this.init()}init(){this.setupEventListeners(),this.setDefaultDateTime(),this.renderReminders(),this.updateStats(),this.startNotificationChecker(),this.createDemoData(),this.loadSettings(),this.initializeAI(),this.renderCategoriesList(),setTimeout((()=>{this.showNotification("⚡","ABM Reminder","Système international activé avec succès!"),this.generateAISuggestions()}),1e3)}initializeAI(){this.aiPatterns={morning:{name:"Routine Matinale Complète",icon:"🌅",reminders:[{text:"Réveil et prière du matin",time:"06:30",category:"priere",priority:"haute"},{text:"Exercices physiques",time:"07:00",category:"sport",priority:"normale"},{text:"Petit-déjeuner équilibré",time:"07:30",category:"sante",priority:"normale"},{text:"Lecture spirituelle",time:"08:00",category:"priere",priority:"normale"},{text:"Préparation pour le travail",time:"08:30",category:"travail",priority:"normale"}]},work:{name:"Journée de Travail Optimisée",icon:"💼",reminders:[{text:"Planification de la journée",time:"09:00",category:"travail",priority:"haute"},{text:"Pause et hydratation",time:"10:30",category:"sante",priority:"normale"},{text:"Déjeuner et repos",time:"12:30",category:"sante",priority:"normale"},{text:"Point équipe",time:"14:00",category:"travail",priority:"normale"},{text:"Bilan de la journée",time:"17:30",category:"travail",priority:"normale"}]},health:{name:"Suivi Santé Complet",icon:"🏥",reminders:[{text:"Prise de médicaments",time:"08:00",category:"sante",priority:"urgente"},{text:"Mesure tension artérielle",time:"09:00",category:"sante",priority:"haute"},{text:"Exercices de respiration",time:"12:00",category:"sante",priority:"normale"},{text:"Marche de 30 minutes",time:"16:00",category:"sport",priority:"normale"},{text:"Prise de médicaments du soir",time:"20:00",category:"sante",priority:"urgente"}]},spiritual:{name:"Vie Spirituelle Enrichie",icon:"🙏",reminders:[{text:"Prière du matin avec gratitude",time:"06:00",category:"priere",priority:"haute"},{text:"Lecture biblique quotidienne",time:"07:00",category:"priere",priority:"normale"},{text:"Prière de midi",time:"12:00",category:"priere",priority:"normale"},{text:"Temps de méditation",time:"18:00",category:"priere",priority:"normale"},{text:"Prière du soir et examen de conscience",time:"21:00",category:"priere",priority:"haute"}]}},this.aiKeywords={"prière":["priere","prier","dieu","jesus","christ","spirituel","meditation","bible"],messe:["messe","eglise","culte","service","communion","eucharistie"],sante:["medecin","docteur","hopital","medicament","sante","rendez-vous medical","pharmacie"],travail:["travail","bureau","reunion","projet","deadline","presentation","client"],famille:["famille","enfants","parents","appeler","visite","anniversaire"],sport:["sport","gym","course","exercice","fitness","entrainement"],tache:["faire","acheter","nettoyer","ranger","courses","menage"]},this.currentAISuggestions=[]}generateAISuggestions(){const e=document.getElementById("aiSuggestions"),t=(new Date).getHours();let i=[];t>=6&&t<9?i.push({icon:"🌅",text:"Routine matinale complète",action:()=>this.applySmartPattern("morning")}):t>=9&&t<17?i.push({icon:"💼",text:"Optimiser votre journée de travail",action:()=>this.applySmartPattern("work")}):t>=17&&t<21&&i.push({icon:"👨‍👩‍👧‍👦",text:"Temps en famille ce soir",action:()=>this.createFamilyReminder()});const n=this.getRecentCategories();n.includes("priere")&&i.push({icon:"🙏",text:"Enrichir votre vie spirituelle",action:()=>this.applySmartPattern("spiritual")}),n.includes("sante")&&i.push({icon:"🏥",text:"Suivi santé personnalisé",action:()=>this.applySmartPattern("health")}),e.innerHTML=i.slice(0,3).map((e=>`\n                    <div class="bg-white/50 rounded-lg p-3 flex items-center justify-between cursor-pointer hover:bg-white/70 transition-all haptic" onclick="this.click()">\n                        <div class="flex items-center space-x-3">\n                            <span class="text-xl">${e.icon}</span>\n                            <span class="text-sm font-medium text-gray-700">${e.text}</span>\n                        </div>\n                        <span class="text-blue-500 text-sm">→</span>\n                    </div>\n                `)).join(""),e.querySelectorAll(".cursor-pointer").forEach(((e,t)=>{e.onclick=i[t].action}))}getRecentCategories(){const e=this.reminders.filter((e=>{const t=new Date(e.created);return(new Date-t)/864e5<=7})).map((e=>e.category));return[...new Set(e)]}processAIInput(e=null){const t=e||document.getElementById("aiInput").value.trim().toLowerCase();t&&(this.showNotification("🤖","IA","Analyse de votre demande..."),setTimeout((()=>{const e=this.analyzeUserInput(t);this.showSmartScheduler(e)}),1500),e||(document.getElementById("aiInput").value=""))}analyzeUserInput(e){const t={originalText:e,detectedCategory:"tache",suggestedPriority:"normale",suggestedTime:null,suggestedRecurrence:null,confidence:0,suggestions:[]};for(const[i,n]of Object.entries(this.aiKeywords)){const s=n.filter((t=>e.includes(t))).length;if(s>0){t.detectedCategory=i,t.confidence+=20*s;break}}const i=[{pattern:/(\d{1,2})[h:](\d{2})?/,type:"specific"},{pattern:/matin|matinée/,time:"08:00",type:"period"},{pattern:/midi|déjeuner/,time:"12:00",type:"period"},{pattern:/après-midi/,time:"15:00",type:"period"},{pattern:/soir|soirée/,time:"19:00",type:"period"},{pattern:/nuit/,time:"21:00",type:"period"}];for(const n of i){const i=e.match(n.pattern);if(i){if("specific"===n.type){const e=i[1].padStart(2,"0"),n=(i[2]||"00").padStart(2,"0");t.suggestedTime=`${e}:${n}`}else t.suggestedTime=n.time;t.confidence+=15;break}}const n=[{pattern:/tous les jours|quotidien|chaque jour/,type:"daily"},{pattern:/chaque semaine|hebdomadaire/,type:"weekly"},{pattern:/chaque mois|mensuel/,type:"monthly"},{pattern:/lundi|mardi|mercredi|jeudi|vendredi|samedi|dimanche/,type:"weekly"}];for(const i of n)if(e.match(i.pattern)){t.suggestedRecurrence=i.type,t.confidence+=10;break}return e.includes("urgent")||e.includes("important")||e.includes("critique")?(t.suggestedPriority="urgente",t.confidence+=10):(e.includes("priorité")||e.includes("important"))&&(t.suggestedPriority="haute",t.confidence+=5),t.suggestions=this.generateSmartSuggestions(t),t}generateSmartSuggestions(e){const t=[],i=(new Date).toISOString().split("T")[0],n={id:Date.now(),text:this.capitalizeFirst(e.originalText),date:i,time:e.suggestedTime||"09:00",category:e.detectedCategory,priority:e.suggestedPriority,location:"",isRecurring:!!e.suggestedRecurrence,recurringType:e.suggestedRecurrence,confidence:e.confidence};return t.push(n),"priere"===e.detectedCategory?t.push({id:Date.now()+1,text:"Lecture spirituelle associée",date:i,time:this.addMinutes(e.suggestedTime||"09:00",30),category:"priere",priority:"normale",location:"",confidence:70}):"sante"===e.detectedCategory&&t.push({id:Date.now()+1,text:"Rappel de suivi médical",date:this.addDays(i,7),time:e.suggestedTime||"10:00",category:"sante",priority:"normale",location:"",confidence:60}),["rendez-vous","messe","travail"].includes(e.detectedCategory)&&t.push({id:Date.now()+2,text:"Préparation - "+e.originalText,date:i,time:this.subtractMinutes(e.suggestedTime||"09:00",30),category:e.detectedCategory,priority:"basse",location:"",confidence:50}),t}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}addMinutes(e,t){const[i,n]=e.split(":").map(Number),s=new Date;return s.setHours(i,n+t),s.toTimeString().slice(0,5)}subtractMinutes(e,t){const[i,n]=e.split(":").map(Number),s=new Date;return s.setHours(i,n-t),s.toTimeString().slice(0,5)}addDays(e,t){const i=new Date(e);return i.setDate(i.getDate()+t),i.toISOString().split("T")[0]}applySmartPattern(e){const t=this.aiPatterns[e];if(!t)return;this.showNotification("⚡","IA",`Application du modèle ${t.name}...`);const i=(new Date).toISOString().split("T")[0];let n=0;t.reminders.forEach(((e,t)=>{setTimeout((()=>{const s={id:Date.now()+t,text:e.text,date:i,time:e.time,category:e.category,priority:e.priority,location:e.location||"",created:(new Date).toISOString(),notified:!1,completed:!1};this.reminders.some((t=>t.text.toLowerCase().includes(e.text.toLowerCase().split(" ")[0])&&t.date===i))||(this.reminders.push(s),n++)}),200*t)})),setTimeout((()=>{this.saveData(),this.renderReminders(),this.updateStats(),this.showNotification("✅","Succès",`${n} rappels ajoutés avec ${t.name}!`)}),200*t.reminders.length+500)}createFamilyReminder(){const e=(new Date).toISOString().split("T")[0];[{text:"Appeler les parents",time:"19:00",priority:"haute"},{text:"Temps de qualité en famille",time:"19:30",priority:"normale"},{text:"Histoire du soir avec les enfants",time:"20:30",priority:"normale"}].forEach(((t,i)=>{const n={id:Date.now()+i,text:t.text,date:e,time:t.time,category:"famille",priority:t.priority,location:"",created:(new Date).toISOString(),notified:!1,completed:!1};this.reminders.push(n)})),this.saveData(),this.renderReminders(),this.updateStats(),this.showNotification("👨‍👩‍👧‍👦","Famille","Rappels familiaux créés!")}showSmartScheduler(e){}loadSettings(){document.getElementById("callMeBotNumber").value=this.settings.callMeBotNumber,document.getElementById("callMeBotApiKey").value=this.settings.callMeBotApiKey,document.getElementById("enableCallMeBot").checked=this.settings.enableCallMeBot,document.getElementById("notifyCallMeBot").checked=this.settings.notifyCallMeBot,document.getElementById("notifyBrowser").checked=this.settings.notifyBrowser,document.getElementById("callMeBotTemplate").value=this.settings.callMeBotTemplate,this.updateConnectionStatus()}saveSettings(){this.settings={callMeBotNumber:document.getElementById("callMeBotNumber").value,callMeBotApiKey:document.getElementById("callMeBotApiKey").value,enableCallMeBot:document.getElementById("enableCallMeBot").checked,notifyCallMeBot:document.getElementById("notifyCallMeBot").checked,notifyBrowser:document.getElementById("notifyBrowser").checked,callMeBotTemplate:document.getElementById("callMeBotTemplate").value},localStorage.setItem("mobile_settings",JSON.stringify(this.settings)),this.updateConnectionStatus(),this.showNotification("💾","Sauvegardé","Configuration CallMeBot enregistrée avec succès!"),navigator.vibrate&&navigator.vibrate([100,50,100])}updateConnectionStatus(){const e=document.getElementById("callMeBotStatus");this.settings.callMeBotNumber&&this.settings.callMeBotApiKey&&this.settings.enableCallMeBot?(e.textContent="✅ Configuré",e.className="px-3 py-1 bg-green-100 text-green-600 text-xs rounded-full"):(e.textContent="Non configuré",e.className="px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full")}async testCallMeBot(){if(this.settings.callMeBotNumber&&this.settings.callMeBotApiKey){this.showNotification("📲","Test CallMeBot","Envoi du message de test...");try{const e="🔔 Test ABM Reminder\n📅 "+(new Date).toLocaleString("fr-FR")+"\n✅ Configuration CallMeBot fonctionnelle!",t=this.settings.callMeBotNumber.replace(/\D/g,""),i=this.settings.callMeBotApiKey,n=`https://api.callmebot.com/whatsapp.php?phone=${t}&text=${encodeURIComponent(e)}&apikey=${i}`;console.log("🧪 Test CallMeBot URL:",n),console.log("🧪 Message de test:",e);const s=new Image;s.onload=()=>{console.log("✅ Test CallMeBot: Succès"),this.showNotification("✅","CallMeBot","Message de test envoyé! Vérifiez votre WhatsApp.")},s.onerror=()=>{console.log("✅ Test CallMeBot: Traité (normal avec CORS)"),this.showNotification("✅","CallMeBot","Message de test envoyé! Vérifiez votre WhatsApp.")},s.src=n}catch(e){console.error("CallMeBot test error:",e),this.showNotification("❌","Erreur CallMeBot","Échec: "+e.message)}}else this.showNotification("❌","Erreur","Veuillez configurer CallMeBot d'abord")}setupEventListeners(){document.getElementById("reminderForm").addEventListener("submit",(e=>{e.preventDefault(),this.addReminder()})),document.getElementById("searchInput").addEventListener("input",(e=>{this.currentFilter=e.target.value.toLowerCase(),this.renderReminders()})),this.setupSwipeGestures();let e=0;document.addEventListener("touchend",(function(t){const i=(new Date).getTime();i-e<=300&&t.preventDefault(),e=i}),!1)}setupSwipeGestures(){let e,t,i,n,s=!1,o=null;document.addEventListener("touchstart",(i=>{i.target.closest(".reminder-card")&&(e=i.touches[0].clientX,t=i.touches[0].clientY,o=i.target.closest(".reminder-card"),s=!0)})),document.addEventListener("touchmove",(a=>{if(!s||!o)return;i=a.touches[0].clientX,n=a.touches[0].clientY;const r=i-e;Math.abs(n-t)<50&&Math.abs(r)>20&&(a.preventDefault(),r<-50&&(o.style.transform=`translateX(${Math.max(r,-100)}px)`))})),document.addEventListener("touchend",(t=>{s&&o&&(i-e<-80?(o.classList.add("swiped"),o.style.transform="translateX(-100px)"):(o.classList.remove("swiped"),o.style.transform="translateX(0)"),s=!1,o=null)}))}setDefaultDateTime(){const e=new Date,t=e.toISOString().split("T")[0],i=e.toTimeString().slice(0,5);document.getElementById("reminderDate").value=t,document.getElementById("reminderTime").value=i}addReminder(){const e=document.getElementById("reminderText").value.trim(),t=document.getElementById("reminderDate").value,i=document.getElementById("reminderTime").value,n=document.getElementById("reminderCategory").value,s=document.getElementById("reminderPriority").value,o=document.getElementById("reminderLocation").value.trim();if(!e||!t||!i)return void this.showNotification("❌","Erreur","Veuillez remplir tous les champs obligatoires");const a={id:Date.now(),text:e,date:t,time:i,category:n,priority:s,location:o,created:(new Date).toISOString(),notified:!1,completed:!1};this.reminders.push(a),this.saveData(),this.renderReminders(),this.updateStats(),this.hideAddModal(),this.clearForm(),navigator.vibrate&&navigator.vibrate(50),this.showNotification("✅","Succès","Rappel créé avec succès!")}completeReminder(e){const t=this.reminders.find((t=>t.id===e));t&&(t.completed=!0,t.completedAt=(new Date).toISOString(),this.completedReminders.push(t),this.reminders=this.reminders.filter((t=>t.id!==e)),this.saveData(),this.renderReminders(),this.updateStats(),navigator.vibrate&&navigator.vibrate([50,50,50]),this.showNotification("🎉","Bravo!","Rappel terminé avec succès!"))}deleteReminder(e){confirm("Êtes-vous sûr de vouloir supprimer ce rappel ?")&&(this.reminders=this.reminders.filter((t=>t.id!==e)),this.saveData(),this.renderReminders(),this.updateStats(),navigator.vibrate&&navigator.vibrate(100),this.showNotification("🗑️","Supprimé","Rappel supprimé définitivement"))}deleteAllReminders(){if(confirm("⚠️ ATTENTION ⚠️\n\nVoulez-vous vraiment supprimer TOUS les rappels ?\n\nCette action est irréversible !")){const e=this.reminders.length;this.reminders=[],this.saveData(),this.renderReminders(),this.updateStats(),navigator.vibrate&&navigator.vibrate([200,100,200,100,200]),this.showNotification("🗑️","Nettoyage",`${e} rappels supprimés`)}}deleteCompletedReminders(){if(confirm("Supprimer tous les rappels terminés ?")){const e=this.completedReminders.length;this.completedReminders=[],localStorage.setItem("mobile_completed",JSON.stringify(this.completedReminders)),this.updateStats(),this.showNotification("🧹","Nettoyé",`${e} rappels terminés supprimés`)}}bulkDeleteByCategory(e){if(confirm(`Supprimer tous les rappels de la catégorie "${e}" ?`)){const t=this.reminders.length;this.reminders=this.reminders.filter((t=>t.category!==e));const i=t-this.reminders.length;this.saveData(),this.renderReminders(),this.updateStats(),this.showNotification("🗂️","Catégorie",`${i} rappels "${e}" supprimés`)}}bulkDeleteByPriority(e){if(confirm(`Supprimer tous les rappels de priorité "${e}" ?`)){const t=this.reminders.length;this.reminders=this.reminders.filter((t=>t.priority!==e));const i=t-this.reminders.length;this.saveData(),this.renderReminders(),this.updateStats(),this.showNotification("⚡","Priorité",`${i} rappels "${e}" supprimés`)}}renderReminders(){const e=document.getElementById("remindersList"),t=document.getElementById("emptyState");let i=[...this.reminders];const n=(new Date).toDateString();if("today"===this.currentTab&&(i=i.filter((e=>new Date(e.date).toDateString()===n))),this.currentFilter&&(i=i.filter((e=>e.text.toLowerCase().includes(this.currentFilter)||e.location?.toLowerCase().includes(this.currentFilter)))),0===i.length)return e.innerHTML="",void t.classList.remove("hidden");t.classList.add("hidden"),i.sort(((e,t)=>{const i={urgente:4,haute:3,normale:2,basse:1},n=i[t.priority]-i[e.priority];return 0!==n?n:new Date(`${e.date}T${e.time}`)-new Date(`${t.date}T${t.time}`)})),e.innerHTML=i.map((e=>{const t=this.getAllCategories().find((t=>t.id===e.category))||{id:"tache",name:"Tâche",icon:"📋",color:"blue"},i=new Date(`${e.date}T${e.time}`),n=new Date,s=i.toDateString()===n.toDateString(),o=this.getTimeUntil(i),a="priere"===e.category||"messe"===e.category?`<div class="text-xs text-purple-600 italic mt-2 p-2 bg-purple-50 rounded-lg">\n                            ${this.christianVerses[Math.floor(Math.random()*this.christianVerses.length)]}\n                        </div>`:"";return`\n                        <div class="reminder-card category-${e.category} ${{urgente:"priority-urgent",haute:"priority-high",normale:"priority-normal",basse:"priority-low"}[e.priority]} p-4 relative">\n                            <div class="flex items-start space-x-3">\n                                <div class="category-icon text-white">\n                                    ${t.icon}\n                                </div>\n                                <div class="flex-1 min-w-0">\n                                    <div class="font-semibold text-gray-800 text-lg leading-tight mb-1">\n                                        ${e.text}\n                                    </div>\n                                    <div class="flex items-center space-x-2 text-sm text-gray-600 mb-2">\n                                        <span>${{urgente:"🚨",haute:"🔴",normale:"🟡",basse:"🟢"}[e.priority]}</span>\n                                        <span>${this.formatDate(e.date)} à ${e.time}</span>\n                                        ${s?'<span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium">Aujourd\'hui</span>':""}\n                                    </div>\n                                    ${o?`<div class="text-xs text-blue-600 font-medium time-until" data-reminder-time="${e.date}T${e.time}" data-target-time="${e.date}T${e.time}">${o}</div>`:""}\n                                    ${e.location?`<div class="text-xs text-gray-500 mt-1">📍 ${e.location}</div>`:""}\n                                    ${a}\n                                </div>\n                            </div>\n                            \n                            \x3c!-- Swipe Actions --\x3e\n                            <div class="swipe-actions px-4">\n                                <button onclick="mobileSystem.completeReminder(${e.id})" \n                                        class="w-12 h-12 bg-green-500 text-white rounded-full mr-2 haptic">\n                                    ✅\n                                </button>\n                                <button onclick="mobileSystem.deleteReminder(${e.id})" \n                                        class="w-12 h-12 bg-red-500 text-white rounded-full haptic">\n                                    🗑️\n                                </button>\n                            </div>\n                        </div>\n                    `})).join("")}updateStats(){const e=(new Date).toDateString(),t=this.reminders.filter((t=>new Date(t.date).toDateString()===e));document.getElementById("totalReminders").textContent=this.reminders.length,document.getElementById("todayCount").textContent=t.length,document.getElementById("callMeBotSent").textContent=this.messageStats.callMeBotSent,document.getElementById("totalSent").textContent=this.messageStats.totalSent}calculateStreak(){(new Date).toDateString();const e=[...new Set(this.completedReminders.map((e=>new Date(e.completedAt).toDateString())))].sort().reverse();let t=0,i=new Date;for(let n of e){if(n!==i.toDateString())break;t++,i.setDate(i.getDate()-1)}return t}formatDate(e){const t=new Date(e),i=new Date,n=new Date(i);return n.setDate(n.getDate()+1),t.toDateString()===i.toDateString()?"Aujourd'hui":t.toDateString()===n.toDateString()?"Demain":t.toLocaleDateString("fr-FR",{weekday:"short",month:"short",day:"numeric"})}getTimeUntil(e){const t=e-new Date;if(t<0)return null;const i=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);if(i>24){const e=Math.floor(i/24);return`Dans ${e} jour${e>1?"s":""}`}return i>0?`Dans ${i}h ${n}min`:n>0?`Dans ${n} minute${n>1?"s":""}`:"Maintenant!"}startNotificationChecker(){setInterval((()=>{this.checkForNotifications()}),3e4),this.checkForNotifications(),this.startUltraFastRefresh(),this.initBackgroundSystem()}startUltraFastRefresh(){console.log("🚀 DÉMARRAGE ACTUALISATION ULTRA-RAPIDE 10ms"),this.refreshCount=0,this.startTime=Date.now(),setInterval((()=>{this.ultraFastRefresh(),this.refreshCount++}),10),setInterval((()=>{this.mediumRefresh()}),100),setInterval((()=>{this.fullRefresh()}),1e3),setInterval((()=>{this.updateRefreshStats()}),5e3)}updateRefreshStats(){const e=(Date.now()-this.startTime)/1e3,t=Math.round(this.refreshCount/e),i=document.getElementById("refreshStatus");i&&(i.innerHTML=`🔄 ${this.refreshCount} actualisations (${t}/sec) - Ultra-rapide 10ms actif`),console.log(`📊 Stats actualisation: ${this.refreshCount} total, ${t}/sec`)}ultraFastRefresh(){this.updateRealTimeElements(),this.checkUrgentNotifications(),this.updateLiveCounters()}mediumRefresh(){this.updateStats(),this.updateTimeDisplays(),this.checkPendingActions()}fullRefresh(){this.renderReminders(),this.generateAISuggestions(),this.updateConnectionStatus(),this.syncWithStorage(),console.log("🔄 Actualisation complète effectuée")}updateRealTimeElements(){const e=new Date;document.querySelectorAll(".current-time").forEach((t=>{t.textContent=e.toLocaleTimeString("fr-FR")})),document.querySelectorAll(".time-until").forEach((e=>{const t=e.dataset.targetTime;if(t){const i=this.getTimeUntil(new Date(t));e.textContent=i||"Maintenant!"}}))}checkUrgentNotifications(){const e=new Date;this.reminders.forEach((t=>{if("urgente"===t.priority&&!t.notified&&!t.completed){const i=new Date(`${t.date}T${t.time}`)-e;i<=1e4&&i>=9990&&(this.showNotification("🚨","URGENT DANS 10s!",t.text),navigator.vibrate&&navigator.vibrate([200,100,200,100,200,100,200]))}}))}updateLiveCounters(){const e=this.reminders.filter((e=>!e.completed)).length,t=this.reminders.filter((e=>{const t=(new Date).toDateString();return new Date(e.date).toDateString()===t})).length;this.animateCounter("totalReminders",e),this.animateCounter("todayCount",t),this.updateBackgroundMonitoring()}updateBackgroundMonitoring(){if(!this.backgroundStats)return;const e=document.getElementById("backgroundChecks"),t=document.getElementById("backgroundQueue"),i=document.getElementById("backgroundSuccess"),n=document.getElementById("backgroundFails"),s=document.getElementById("backgroundStatus");if(e&&(e.textContent=this.backgroundStats.totalChecks),t&&(t.textContent=this.backgroundQueue.pendingNotifications.length+this.backgroundQueue.retryQueue.length),i&&(i.textContent=this.backgroundStats.successfulSends),n&&(n.textContent=this.backgroundStats.failedSends),s){const e=Object.values(this.backgroundWorkers).filter((e=>null!==e)).length,t=4;e===t?(s.innerHTML="🟢 Tous les workers actifs",s.className="mt-1 text-xs text-green-300"):e>0?(s.innerHTML=`🟡 ${e}/${t} workers actifs`,s.className="mt-1 text-xs text-yellow-300"):(s.innerHTML="🔴 Système arrêté",s.className="mt-1 text-xs text-red-300")}}animateCounter(e,t){const i=document.getElementById(e);if(!i)return;const n=parseInt(i.textContent)||0;if(n!==t){const e=n+(t-n>0?1:-1);i.textContent=e,i.style.transform="scale(1.1)",i.style.color="#6366f1",setTimeout((()=>{i.style.transform="scale(1)",i.style.color=""}),50)}}updateTimeDisplays(){const e=new Date;document.querySelectorAll("[data-reminder-time]").forEach((t=>{const i=new Date(t.dataset.reminderTime),n=this.getTimeUntil(i);if(n){t.textContent=n;const s=i-e;s<3e5?(t.style.color="#ef4444",t.style.fontWeight="bold"):t.style.color=s<36e5?"#f97316":"#3b82f6"}}))}checkPendingActions(){this.reminders.forEach((e=>{e.processed||(e.processed=!0,this.processReminderBackground(e))}))}processReminderBackground(e){const t=new Date;new Date(`${e.date}T${e.time}`)-t<6e4&&!e.preloaded&&(e.preloaded=!0,console.log(`📋 Pré-chargement: ${e.text}`))}syncWithStorage(){try{const e=JSON.parse(localStorage.getItem("mobile_reminders"))||[],t=JSON.parse(localStorage.getItem("mobile_completed"))||[];JSON.stringify(e)!==JSON.stringify(this.reminders)&&(console.log("🔄 Synchronisation détectée - Rechargement des données"),this.reminders=e,this.renderReminders()),JSON.stringify(t)!==JSON.stringify(this.completedReminders)&&(this.completedReminders=t)}catch(e){console.error("Erreur de synchronisation:",e)}}initBackgroundSystem(){console.log("🚀 INITIALISATION SYSTÈME ARRIÈRE-PLAN AVANCÉ"),this.backgroundWorkers={notificationChecker:null,callMeBotSender:null,reminderProcessor:null,emergencyHandler:null},this.backgroundQueue={pendingNotifications:[],failedSends:[],retryQueue:[]},this.backgroundStats={totalChecks:0,successfulSends:0,failedSends:0,lastActivity:Date.now()},this.startBackgroundWorkers(),this.initBackgroundPersistence(),this.initVisibilityHandler(),this.initCrashRecovery(),console.log("✅ Système d'arrière-plan initialisé avec succès")}startBackgroundWorkers(){console.log("⚡ Démarrage des workers d'arrière-plan..."),this.backgroundWorkers.notificationChecker=setInterval((()=>{this.backgroundNotificationCheck()}),5e3),this.backgroundWorkers.callMeBotSender=setInterval((()=>{this.backgroundCallMeBotSender()}),3e3),this.backgroundWorkers.reminderProcessor=setInterval((()=>{this.backgroundReminderProcessor()}),1e4),this.backgroundWorkers.emergencyHandler=setInterval((()=>{this.backgroundEmergencyHandler()}),1e3),console.log("✅ Tous les workers d'arrière-plan sont actifs")}backgroundNotificationCheck(){this.backgroundStats.totalChecks++;const e=new Date;console.log(`🔍 [${e.toLocaleTimeString()}] Vérification arrière-plan #${this.backgroundStats.totalChecks}`),this.reminders.forEach((t=>{if(t.notified||t.completed)return;const i=new Date(`${t.date}T${t.time}`)-e;i<=6e4&&i>=-3e4&&(this.backgroundQueue.pendingNotifications.find((e=>e.id===t.id))||(this.backgroundQueue.pendingNotifications.push({...t,queuedAt:e.toISOString(),attempts:0}),console.log(`📋 Rappel ajouté à la queue: ${t.text}`)))})),this.backgroundStats.lastActivity=Date.now()}backgroundCallMeBotSender(){if(0===this.backgroundQueue.pendingNotifications.length)return;const e=new Date;console.log(`📲 [${e.toLocaleTimeString()}] Traitement queue CallMeBot (${this.backgroundQueue.pendingNotifications.length} en attente)`);const t=this.backgroundQueue.pendingNotifications[0];t&&this.processBackgroundNotification(t)}async processBackgroundNotification(e){const t=new Date,i=new Date(`${e.date}T${e.time}`)-t;if(console.log(`⚡ Traitement: ${e.text} (dans ${Math.round(i/1e3)}s)`),i<=3e4&&i>=-3e4)try{const i=this.reminders.find((t=>t.id===e.id));i&&!i.notified&&(i.notified=!0,i.notifiedAt=t.toISOString(),await this.sendBackgroundNotification(e),this.backgroundQueue.pendingNotifications=this.backgroundQueue.pendingNotifications.filter((t=>t.id!==e.id)),this.saveData(),this.updateStats(),console.log(`✅ Notification envoyée avec succès: ${e.text}`),this.backgroundStats.successfulSends++)}catch(i){console.error("❌ Erreur envoi notification:",i),e.attempts=(e.attempts||0)+1,e.lastError=i.message,e.lastAttempt=t.toISOString(),e.attempts>=3?(this.backgroundQueue.failedSends.push(e),this.backgroundQueue.pendingNotifications=this.backgroundQueue.pendingNotifications.filter((t=>t.id!==e.id)),console.log(`💀 Échec définitif après 3 tentatives: ${e.text}`),this.backgroundStats.failedSends++):(this.backgroundQueue.retryQueue.push({...e,retryAt:t.getTime()+3e4*e.attempts}),this.backgroundQueue.pendingNotifications=this.backgroundQueue.pendingNotifications.filter((t=>t.id!==e.id)),console.log(`🔄 Tentative ${e.attempts}/3 échouée, retry programmé: ${e.text}`))}else i>3e4?console.log(`⏰ Trop tôt pour: ${e.text} (dans ${Math.round(i/1e3)}s)`):(console.log(`⏰ Trop tard pour: ${e.text} (il y a ${Math.abs(Math.round(i/1e3))}s)`),this.backgroundQueue.pendingNotifications=this.backgroundQueue.pendingNotifications.filter((t=>t.id!==e.id)))}async sendBackgroundNotification(e){let t=`🔔 RAPPEL MAINTENANT!\n${{urgente:"🚨",haute:"🔴",normale:"🟡",basse:"🟢"}[e.priority]} ${e.text}`;if(e.location&&(t+=`\n📍 ${e.location}`),console.log(`📤 Envoi notification pour: ${e.text}`),this.settings.notifyBrowser&&(this.showNotification("🔔","RAPPEL MAINTENANT!",t),"Notification"in window&&"granted"===Notification.permission&&new Notification("ABM Reminder - RAPPEL!",{body:t,icon:"⚡",tag:`reminder-${e.id}`,requireInteraction:"urgente"===e.priority,silent:!1})),this.settings.notifyCallMeBot&&this.settings.enableCallMeBot&&this.settings.callMeBotNumber&&this.settings.callMeBotApiKey&&await this.sendBackgroundCallMeBot(e),navigator.vibrate){const t={urgente:[200,100,200,100,200,100,200],haute:[200,100,200,100,200],normale:[200,100,200],basse:[100]};navigator.vibrate(t[e.priority]||[200])}try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),i=e.createGain();t.connect(i),i.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),i.gain.setValueAtTime(.1,e.currentTime),t.start(),t.stop(e.currentTime+.2)}catch(e){console.log("Son d'alerte non disponible")}}async sendBackgroundCallMeBot(e){try{console.log(`📲 Envoi CallMeBot pour: ${e.text}`);const t=this.settings.callMeBotTemplate.replace("{titre}",e.text).replace("{heure}",`${this.formatDate(e.date)} à ${e.time}`).replace("{lieu}",e.location||"Non spécifié"),i=this.settings.callMeBotNumber.replace(/\D/g,""),n=this.settings.callMeBotApiKey,s=`https://api.callmebot.com/whatsapp.php?phone=${i}&text=${encodeURIComponent(t)}&apikey=${n}`;console.log("📲 CallMeBot URL:",s);let o=!1;try{await fetch(s,{method:"GET",mode:"no-cors"}),o=!0,console.log("✅ CallMeBot: Envoi via fetch réussi")}catch(e){console.log("⚠️ CallMeBot: Fetch échoué, tentative avec image...");const t=new Image;await new Promise(((e,i)=>{t.onload=()=>{o=!0,e()},t.onerror=()=>{o=!0,e()},t.src=s,setTimeout((()=>{o=!0,e()}),1e4)}))}if(o){const t=this.reminders.find((t=>t.id===e.id));t&&(t.sentVia="callmebot",t.sentAt=(new Date).toISOString()),this.messageStats.callMeBotSent++,this.messageStats.totalSent++,this.saveMessageStats(),console.log("✅ CallMeBot: Message envoyé avec succès"),this.showNotification("📲","CallMeBot","Message envoyé sur WhatsApp!")}}catch(e){throw console.error("❌ CallMeBot: Erreur d'envoi:",e),e}}backgroundReminderProcessor(){const e=new Date;this.backgroundQueue.retryQueue=this.backgroundQueue.retryQueue.filter((t=>!(e.getTime()>=t.retryAt&&(console.log(`🔄 Retry: ${t.text}`),this.backgroundQueue.pendingNotifications.push(t),1))));const t=e.getTime()-864e5;this.backgroundQueue.failedSends=this.backgroundQueue.failedSends.filter((e=>new Date(e.queuedAt).getTime()>t));const i=new Date(e.getTime()+3e5);this.reminders.forEach((t=>{if(!t.notified&&!t.completed){const n=new Date(`${t.date}T${t.time}`);n<=i&&n>e&&(t.preloaded||(t.preloaded=!0,console.log(`📋 Pré-chargement: ${t.text} (dans ${Math.round((n-e)/6e4)} min)`)))}})),this.backgroundStats.totalChecks%20==0&&(console.log(`📊 Stats arrière-plan: ${this.backgroundStats.totalChecks} vérifications, ${this.backgroundStats.successfulSends} envois réussis, ${this.backgroundStats.failedSends} échecs`),console.log(`📋 Queues: ${this.backgroundQueue.pendingNotifications.length} en attente, ${this.backgroundQueue.retryQueue.length} retry, ${this.backgroundQueue.failedSends.length} échecs`))}backgroundEmergencyHandler(){const e=new Date;this.reminders.forEach((t=>{if("urgente"===t.priority&&!t.notified&&!t.completed){const i=new Date(`${t.date}T${t.time}`)-e;i<=3e4&&i>=29e3&&(console.log(`🚨 URGENCE dans 30s: ${t.text}`),this.showNotification("🚨","URGENT dans 30s!",t.text),navigator.vibrate&&navigator.vibrate([100,50,100,50,100,50,200]),this.backgroundQueue.pendingNotifications.find((e=>e.id===t.id))||this.backgroundQueue.pendingNotifications.unshift({...t,queuedAt:e.toISOString(),attempts:0,priority:"emergency"}))}}))}initBackgroundPersistence(){setInterval((()=>{const e={queue:this.backgroundQueue,stats:this.backgroundStats,lastSave:(new Date).toISOString()};localStorage.setItem("mobile_background_state",JSON.stringify(e))}),3e4);try{const e=localStorage.getItem("mobile_background_state");if(e){const t=JSON.parse(e);t.queue&&(this.backgroundQueue={...this.backgroundQueue,...t.queue}),console.log("🔄 État d'arrière-plan restauré")}}catch(e){console.error("Erreur restauration état arrière-plan:",e)}}initVisibilityHandler(){document.addEventListener("visibilitychange",(()=>{document.hidden?(console.log("📱 Page cachée - Mode arrière-plan activé"),this.isInBackground=!0,this.adjustBackgroundFrequency(!0)):(console.log("📱 Page visible - Mode normal activé"),this.isInBackground=!1,this.adjustBackgroundFrequency(!1),this.checkForNotifications(),this.renderReminders(),this.updateStats())}))}adjustBackgroundFrequency(e){e?console.log("⚡ Optimisation arrière-plan: fréquence réduite"):console.log("⚡ Mode normal: fréquence standard")}initCrashRecovery(){window.addEventListener("beforeunload",(()=>{const e={pendingNotifications:this.backgroundQueue.pendingNotifications,timestamp:Date.now()};localStorage.setItem("mobile_crash_recovery",JSON.stringify(e))}));try{const e=localStorage.getItem("mobile_crash_recovery");if(e){const t=JSON.parse(e);Date.now()-t.timestamp<6e5&&t.pendingNotifications&&(this.backgroundQueue.pendingNotifications=t.pendingNotifications,console.log(`🔄 Récupération après crash: ${t.pendingNotifications.length} notifications restaurées`),this.showNotification("🔄","Récupération","Notifications restaurées après redémarrage")),localStorage.removeItem("mobile_crash_recovery")}}catch(e){console.error("Erreur récupération crash:",e)}}getBackgroundStats(){return{...this.backgroundStats,queueSizes:{pending:this.backgroundQueue.pendingNotifications.length,retry:this.backgroundQueue.retryQueue.length,failed:this.backgroundQueue.failedSends.length},isActive:Object.values(this.backgroundWorkers).every((e=>null!==e))}}stopBackgroundSystem(){console.log("🛑 Arrêt du système d'arrière-plan"),Object.values(this.backgroundWorkers).forEach((e=>{e&&clearInterval(e)})),this.backgroundWorkers={notificationChecker:null,callMeBotSender:null,reminderProcessor:null,emergencyHandler:null}}checkForNotifications(){const e=new Date;this.reminders.forEach((t=>{if(t.notified||t.completed)return;const i=new Date(`${t.date}T${t.time}`)-e;i<=6e4&&i>=-6e4&&(this.sendNotification(t),t.notified=!0,this.saveData())}))}async sendNotification(e){let t=`🔔 RAPPEL MAINTENANT!\n${{urgente:"🚨",haute:"🔴",normale:"🟡",basse:"🟢"}[e.priority]} ${e.text}`;if(e.location&&(t+=`\n📍 ${e.location}`),this.settings.notifyBrowser&&(this.showNotification("🔔","RAPPEL MAINTENANT!",t),"Notification"in window&&"granted"===Notification.permission&&new Notification("ABM Reminder",{body:t,icon:"⚡",tag:`reminder-${e.id}`,requireInteraction:"urgente"===e.priority}),this.settings.notifyCallMeBot&&this.settings.enableCallMeBot||(e.sentVia="browser",e.sentAt=(new Date).toISOString())),this.settings.notifyCallMeBot&&this.settings.enableCallMeBot&&await this.sendCallMeBotMessage(e),navigator.vibrate){const t={urgente:[200,100,200,100,200],haute:[200,100,200],normale:[200],basse:[100]};navigator.vibrate(t[e.priority]||[200])}}async sendCallMeBotMessage(e){try{if(!this.settings.callMeBotNumber||!this.settings.callMeBotApiKey)throw new Error("CallMeBot non configuré");const t=this.settings.callMeBotTemplate.replace("{titre}",e.text).replace("{heure}",`${this.formatDate(e.date)} à ${e.time}`).replace("{lieu}",e.location||"Non spécifié"),i=this.settings.callMeBotNumber.replace(/\D/g,""),n=this.settings.callMeBotApiKey,s=`https://api.callmebot.com/whatsapp.php?phone=${i}&text=${encodeURIComponent(t)}&apikey=${n}`;console.log("📲 CallMeBot URL:",s),console.log("📲 Message à envoyer:",t);const o=new Image;o.onload=()=>{console.log("✅ CallMeBot: Requête envoyée avec succès"),this.messageStats.callMeBotSent++,this.messageStats.totalSent++,this.saveMessageStats(),this.updateStats(),e.sentVia="callmebot",e.sentAt=(new Date).toISOString(),this.saveData(),this.showNotification("📲","CallMeBot","Message envoyé sur WhatsApp!")},o.onerror=()=>{console.log("✅ CallMeBot: Requête traitée (normal avec no-cors)"),this.messageStats.callMeBotSent++,this.messageStats.totalSent++,this.saveMessageStats(),this.updateStats(),e.sentVia="callmebot",e.sentAt=(new Date).toISOString(),this.saveData(),this.showNotification("📲","CallMeBot","Message envoyé sur WhatsApp!")},o.src=s}catch(e){console.error("CallMeBot send error:",e),this.showNotification("❌","CallMeBot","Erreur envoi CallMeBot: "+e.message)}}async sendWhatsAppMessage(e){try{const t=this.settings.whatsappTemplate.replace("{titre}",e.text).replace("{heure}",`${this.formatDate(e.date)} à ${e.time}`).replace("{lieu}",e.location||"Non spécifié");let i=!1;if("web"===this.settings.whatsappMethod){const e=encodeURIComponent(t),n=`https://wa.me/${this.settings.whatsappNumber.replace(/\D/g,"")}?text=${e}`;window.open(n,"_blank"),i=!0}else"business"===this.settings.whatsappMethod&&this.settings.whatsappToken?(await fetch("https://graph.facebook.com/v17.0/YOUR_PHONE_NUMBER_ID/messages",{method:"POST",headers:{Authorization:`Bearer ${this.settings.whatsappToken}`,"Content-Type":"application/json"},body:JSON.stringify({messaging_product:"whatsapp",to:this.settings.whatsappNumber.replace(/\D/g,""),type:"text",text:{body:t}})})).ok&&(i=!0):"twilio"===this.settings.whatsappMethod&&this.settings.twilioSid&&this.settings.twilioToken&&(await fetch(`https://api.twilio.com/2010-04-01/Accounts/${this.settings.twilioSid}/Messages.json`,{method:"POST",headers:{Authorization:"Basic "+btoa(`${this.settings.twilioSid}:${this.settings.twilioToken}`),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({From:`whatsapp:${this.settings.twilioNumber}`,To:`whatsapp:${this.settings.whatsappNumber}`,Body:t})})).ok&&(i=!0);if(!i)throw new Error("Aucune méthode WhatsApp configurée");this.messageStats.whatsappSent++,this.messageStats.totalSent++,this.saveMessageStats(),this.updateStats(),this.showNotification("📱","WhatsApp","Rappel envoyé sur WhatsApp")}catch(e){console.error("WhatsApp send error:",e),this.showNotification("❌","WhatsApp","Erreur envoi WhatsApp")}}async sendCallBotMessage(e){try{const t=this.settings.callTemplate.replace("{titre}",e.text).replace("{heure}",`${this.formatDate(e.date)} à ${e.time}`);console.log("Call Bot message would be sent:",t),this.messageStats.callsSent++,this.messageStats.totalSent++,this.saveMessageStats(),this.updateStats(),this.showNotification("📞","Call Bot","Appel automatique lancé")}catch(e){console.error("Call Bot send error:",e),this.showNotification("❌","Call Bot","Erreur appel automatique")}}showNotification(e,t,i){const n=document.getElementById("notification"),s=document.getElementById("notificationIcon"),o=document.getElementById("notificationTitle"),a=document.getElementById("notificationMessage");s.textContent=e,o.textContent=t,a.textContent=i,n.classList.add("show"),setTimeout((()=>{n.classList.remove("show")}),4e3)}hideNotification(){document.getElementById("notification").classList.remove("show")}clearForm(){document.getElementById("reminderForm").reset(),this.setDefaultDateTime()}saveData(){localStorage.setItem("mobile_reminders",JSON.stringify(this.reminders)),localStorage.setItem("mobile_completed",JSON.stringify(this.completedReminders))}saveMessageStats(){localStorage.setItem("mobile_message_stats",JSON.stringify(this.messageStats))}getAllCategories(){return[...this.defaultCategories,...this.customCategories]}addCustomCategory(e,t,i){if(!e||!t)return this.showNotification("❌","Erreur","Nom et icône requis"),!1;if(this.getAllCategories().some((t=>t.name.toLowerCase()===e.toLowerCase()||t.id===this.generateCategoryId(e))))return this.showNotification("❌","Erreur","Cette catégorie existe déjà"),!1;const n={id:this.generateCategoryId(e),name:e,icon:t,color:i||"blue",deletable:!0,created:(new Date).toISOString()};return this.customCategories.push(n),this.saveCustomCategories(),this.renderCategoriesList(),this.updateCategorySelects(),this.updateQuickActions(),this.createCategoryStyle(n),this.showNotification("✅","Succès",`Catégorie "${e}" créée!`),navigator.vibrate&&navigator.vibrate([50,50,100]),!0}deleteCustomCategory(e){const t=this.customCategories.find((t=>t.id===e));if(!t)return this.showNotification("❌","Erreur","Catégorie introuvable"),!1;const i=this.reminders.filter((t=>t.category===e));if(i.length>0){const e=`⚠️ ATTENTION ⚠️\n\nIl y a ${i.length} rappel(s) avec la catégorie "${t.name}".\n\nVoulez-vous vraiment supprimer cette catégorie ?\n\nLes rappels seront convertis en "Tâche".`;if(!confirm(e))return!1;i.forEach((e=>{e.category="tache"})),this.saveData(),this.renderReminders()}return this.customCategories=this.customCategories.filter((t=>t.id!==e)),this.saveCustomCategories(),this.renderCategoriesList(),this.updateCategorySelects(),this.updateQuickActions(),this.removeCategoryStyle(e),this.showNotification("🗑️","Supprimé",`Catégorie "${t.name}" supprimée`),navigator.vibrate&&navigator.vibrate([100,50,100]),!0}generateCategoryId(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}createCategoryStyle(e){const t={red:"#ef4444, #dc2626",blue:"#3b82f6, #1d4ed8",green:"#10b981, #047857",yellow:"#f59e0b, #d97706",purple:"#8b5cf6, #7c3aed",pink:"#ec4899, #db2777",indigo:"#6366f1, #4f46e5",orange:"#f97316, #ea580c",teal:"#14b8a6, #0d9488",cyan:"#06b6d4, #0891b2",gray:"#6b7280, #4b5563",emerald:"#10b981, #059669"},i=t[e.color]||t.blue;let n=document.getElementById(`category-style-${e.id}`);n||(n=document.createElement("style"),n.id=`category-style-${e.id}`,document.head.appendChild(n)),n.textContent=`\n                    .category-${e.id} .category-icon { \n                        background: linear-gradient(135deg, ${i}); \n                    }\n                `}removeCategoryStyle(e){const t=document.getElementById(`category-style-${e}`);t&&t.remove()}renderCategoriesList(){const e=document.getElementById("categoriesList");if(!e)return;const t=this.getAllCategories();e.innerHTML=t.map((e=>{const t=this.reminders.filter((t=>t.category===e.id)).length;return`\n                        <div class="category-item flex items-center justify-between">\n                            <div class="flex items-center space-x-3">\n                                <div class="w-10 h-10 rounded-lg flex items-center justify-center text-white category-icon" \n                                     style="background: linear-gradient(135deg, ${this.getCategoryColors(e.color)});">\n                                    ${e.icon}\n                                </div>\n                                <div>\n                                    <div class="font-semibold text-gray-800">${e.name}</div>\n                                    <div class="text-xs text-gray-500">${t} rappel(s)</div>\n                                </div>\n                            </div>\n                            <div class="flex items-center space-x-2">\n                                ${e.deletable?`\n                                    <button onclick="mobileSystem.deleteCustomCategory('${e.id}')" \n                                            class="category-delete-btn haptic">\n                                        🗑️ Supprimer\n                                    </button>\n                                `:'\n                                    <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full">\n                                        Système\n                                    </span>\n                                '}\n                            </div>\n                        </div>\n                    `})).join("")}getCategoryColors(e){const t={red:"#ef4444, #dc2626",blue:"#3b82f6, #1d4ed8",green:"#10b981, #047857",yellow:"#f59e0b, #d97706",purple:"#8b5cf6, #7c3aed",pink:"#ec4899, #db2777",indigo:"#6366f1, #4f46e5",orange:"#f97316, #ea580c",teal:"#14b8a6, #0d9488",cyan:"#06b6d4, #0891b2",gray:"#6b7280, #4b5563",emerald:"#10b981, #059669"};return t[e]||t.blue}updateCategorySelects(){const e=document.querySelectorAll("#reminderCategory"),t=this.getAllCategories();e.forEach((e=>{const i=e.value;e.innerHTML=t.map((e=>`<option value="${e.id}">${e.icon} ${e.name}</option>`)).join(""),t.some((e=>e.id===i))&&(e.value=i)}))}updateQuickActions(){const e=document.querySelector(".flex.space-x-2.overflow-x-auto.pb-2");if(!e)return;const t=this.getAllCategories().map((e=>({...e,usage:this.reminders.filter((t=>t.category===e.id)).length}))).sort(((e,t)=>t.usage-e.usage)).slice(0,6);e.innerHTML=t.map((e=>`\n                    <button class="quick-action flex items-center space-x-2 whitespace-nowrap haptic" onclick="showAddModal('${e.id}')">\n                        <span>${e.icon}</span>\n                        <span class="text-white text-sm font-medium">${e.name}</span>\n                    </button>\n                `)).join("")}saveCustomCategories(){localStorage.setItem("mobile_custom_categories",JSON.stringify(this.customCategories)),this.customCategories.forEach((e=>{this.createCategoryStyle(e)}))}createDemoData(){if(0===this.reminders.length){const e=(new Date).toISOString().split("T")[0],t=[{id:Date.now()+1,text:"Prière du matin - Moment avec Dieu",date:e,time:"07:30",category:"priere",priority:"haute",location:"Chambre",created:(new Date).toISOString(),notified:!1,completed:!1,sentVia:null,sentAt:null},{id:Date.now()+2,text:"Messe dominicale",date:e,time:"10:00",category:"messe",priority:"haute",location:"Église Saint-Pierre",created:(new Date).toISOString(),notified:!1,completed:!1,sentVia:null,sentAt:null},{id:Date.now()+3,text:"Rendez-vous médecin",date:e,time:"15:30",category:"sante",priority:"normale",location:"Cabinet Dr. Martin",created:(new Date).toISOString(),notified:!1,completed:!1,sentVia:null,sentAt:null},{id:Date.now()+4,text:"Appeler Maman",date:e,time:"19:00",category:"famille",priority:"haute",location:"",created:(new Date).toISOString(),notified:!1,completed:!1,sentVia:null,sentAt:null}];this.reminders=t,this.saveData()}}renderStats(){this.updateStatsNumbers(),this.renderStatsTable(),this.renderCategoryStats(),this.renderSendingModeStats()}updateStatsNumbers(){const e=[...this.reminders,...this.completedReminders],t=e.filter((e=>e.notified||e.sentVia)),i=this.reminders.filter((e=>!e.notified&&!e.completed)),n=this.completedReminders;document.getElementById("statsTotal").textContent=e.length,document.getElementById("statsSent").textContent=t.length,document.getElementById("statsPending").textContent=i.length,document.getElementById("statsCompleted").textContent=n.length}renderStatsTable(e="all"){const t=document.getElementById("statsTableBody"),i=[...this.reminders,...this.completedReminders];let n=i;switch(e){case"sent":n=i.filter((e=>e.notified||e.sentVia));break;case"pending":n=this.reminders.filter((e=>!e.notified&&!e.completed));break;case"completed":n=this.completedReminders;break;case"callmebot":n=i.filter((e=>"callmebot"===e.sentVia))}n.sort(((e,t)=>new Date(t.created)-new Date(e.created))),t.innerHTML=n.map((e=>{const t=this.getAllCategories().find((t=>t.id===e.category))||{id:"tache",name:"Tâche",icon:"📋",color:"blue"};let i="",n="",s="";s=e.completed?'<span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">🎉 Terminé</span>':e.notified||e.sentVia?'<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">✅ Actif</span>':'<span class="px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium">⏳ En Attente</span>',e.sentVia?(i='<span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">✅ Envoyé</span>',n="callmebot"===e.sentVia?'<span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs">📲 CallMeBot</span>':"browser"===e.sentVia?'<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs">🌐 Navigateur</span>':'<span class="px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs">❓ Inconnu</span>'):e.notified?(i='<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">📤 Notifié</span>',n='<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs">🌐 Navigateur</span>'):(i='<span class="px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium">⏳ En Attente</span>',n='<span class="px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs">➖ Aucun</span>');const o=new Date(`${e.date}T${e.time}`),a=o.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit"}),r=o.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return`\n                        <tr class="border-b border-gray-100 hover:bg-gray-50">\n                            <td class="px-3 py-3">\n                                <div class="font-medium text-gray-800 text-sm">${e.text}</div>\n                                ${e.location?`<div class="text-xs text-gray-500 mt-1">📍 ${e.location}</div>`:""}\n                            </td>\n                            <td class="px-3 py-3">\n                                <div class="text-sm text-gray-700">${a}</div>\n                                <div class="text-xs text-gray-500">${r}</div>\n                            </td>\n                            <td class="px-3 py-3">\n                                <div class="flex items-center space-x-2">\n                                    <span class="text-lg">${t.icon}</span>\n                                    <span class="text-sm text-gray-700">${t.name}</span>\n                                </div>\n                            </td>\n                            <td class="px-3 py-3">\n                                <span class="px-2 py-1 rounded-full text-xs font-medium ${{urgente:"text-red-600 bg-red-50",haute:"text-orange-600 bg-orange-50",normale:"text-yellow-600 bg-yellow-50",basse:"text-green-600 bg-green-50"}[e.priority]}">\n                                    ${{urgente:"🚨",haute:"🔴",normale:"🟡",basse:"🟢"}[e.priority]} ${e.priority}\n                                </span>\n                            </td>\n                            <td class="px-3 py-3">${i}</td>\n                            <td class="px-3 py-3">${n}</td>\n                            <td class="px-3 py-3">${s}</td>\n                        </tr>\n                    `})).join(""),0===n.length&&(t.innerHTML='\n                        <tr>\n                            <td colspan="7" class="px-3 py-8 text-center text-gray-500">\n                                <div class="text-4xl mb-2">📊</div>\n                                <div>Aucun rappel trouvé pour ce filtre</div>\n                            </td>\n                        </tr>\n                    ')}renderCategoryStats(){const e=document.getElementById("categoryStats"),t=[...this.reminders,...this.completedReminders],i=this.getAllCategories(),n={};i.forEach((e=>{n[e.id]={...e,total:0,sent:0,pending:0,completed:0}})),t.forEach((e=>{n[e.category]&&(n[e.category].total++,e.completed?n[e.category].completed++:e.notified||e.sentVia?n[e.category].sent++:n[e.category].pending++)}));const s=Object.values(n).filter((e=>e.total>0)).sort(((e,t)=>t.total-e.total));e.innerHTML=s.map((e=>`\n                    <div class="bg-white rounded-lg border border-gray-200 p-4">\n                        <div class="flex items-center justify-between mb-2">\n                            <div class="flex items-center space-x-3">\n                                <div class="w-10 h-10 rounded-lg flex items-center justify-center text-white" \n                                     style="background: linear-gradient(135deg, ${this.getCategoryColors(e.color)});">\n                                    ${e.icon}\n                                </div>\n                                <div>\n                                    <div class="font-semibold text-gray-800">${e.name}</div>\n                                    <div class="text-sm text-gray-500">${e.total} rappel(s) total</div>\n                                </div>\n                            </div>\n                            <div class="text-right">\n                                <div class="text-lg font-bold text-gray-800">${e.total}</div>\n                            </div>\n                        </div>\n                        <div class="grid grid-cols-3 gap-2 text-xs">\n                            <div class="text-center p-2 bg-green-50 rounded">\n                                <div class="font-bold text-green-700">${e.sent}</div>\n                                <div class="text-green-600">Envoyés</div>\n                            </div>\n                            <div class="text-center p-2 bg-orange-50 rounded">\n                                <div class="font-bold text-orange-700">${e.pending}</div>\n                                <div class="text-orange-600">En Attente</div>\n                            </div>\n                            <div class="text-center p-2 bg-purple-50 rounded">\n                                <div class="font-bold text-purple-700">${e.completed}</div>\n                                <div class="text-purple-600">Terminés</div>\n                            </div>\n                        </div>\n                    </div>\n                `)).join(""),0===s.length&&(e.innerHTML='\n                        <div class="text-center py-8 text-gray-500">\n                            <div class="text-4xl mb-2">📊</div>\n                            <div>Aucune donnée de catégorie disponible</div>\n                        </div>\n                    ')}renderSendingModeStats(){const e=[...this.reminders,...this.completedReminders],t=e.filter((e=>"callmebot"===e.sentVia)).length,i=e.filter((e=>e.notified&&!e.sentVia)).length;document.getElementById("callmebotCount").textContent=t,document.getElementById("browserCount").textContent=i}}function showAddModal(e=""){document.getElementById("addModal").classList.add("active"),e&&(document.getElementById("reminderCategory").value=e),setTimeout((()=>{document.getElementById("reminderText").focus()}),300)}function toggleAI(){const e=document.getElementById("aiPanel"),t=document.getElementById("aiToggle");"none"===e.style.display?(e.style.display="block",t.textContent="🧠",mobileSystem.generateAISuggestions()):(e.style.display="none",t.textContent="🤖")}function handleAIInput(e){"Enter"===e.key&&processAIInput()}function processAIInput(){mobileSystem.processAIInput()}function applySmartPattern(e){mobileSystem.applySmartPattern(e)}function showSmartScheduler(e=null){if(document.getElementById("smartSchedulerModal").classList.add("active"),e){document.getElementById("analysisResult").innerHTML=`\n                    <div class="space-y-2">\n                        <div><strong>Texte analysé:</strong> "${e.originalText}"</div>\n                        <div><strong>Catégorie détectée:</strong> ${e.detectedCategory} (${e.confidence}% confiance)</div>\n                        <div><strong>Heure suggérée:</strong> ${e.suggestedTime||"Non détectée"}</div>\n                        <div><strong>Priorité:</strong> ${e.suggestedPriority}</div>\n                        ${e.suggestedRecurrence?`<div><strong>Récurrence:</strong> ${e.suggestedRecurrence}</div>`:""}\n                    </div>\n                `;const t=document.getElementById("smartSuggestions");mobileSystem.currentAISuggestions=e.suggestions,t.innerHTML=e.suggestions.map(((e,t)=>`\n                    <div class="bg-white rounded-lg p-4 border border-gray-200">\n                        <div class="flex items-center justify-between mb-2">\n                            <h4 class="font-semibold text-gray-800">${e.text}</h4>\n                            <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full">${e.confidence}%</span>\n                        </div>\n                        <div class="text-sm text-gray-600 space-y-1">\n                            <div>📅 ${mobileSystem.formatDate(e.date)} à ${e.time}</div>\n                            <div>🎯 ${e.category} - ${e.priority}</div>\n                            ${e.location?`<div>📍 ${e.location}</div>`:""}\n                        </div>\n                        <div class="flex space-x-2 mt-3">\n                            <button onclick="acceptSuggestion(${t})" class="flex-1 bg-green-500 text-white py-2 px-3 rounded-lg text-sm haptic">\n                                ✅ Accepter\n                            </button>\n                            <button onclick="editSuggestion(${t})" class="flex-1 bg-blue-500 text-white py-2 px-3 rounded-lg text-sm haptic">\n                                ✏️ Modifier\n                            </button>\n                            <button onclick="rejectSuggestion(${t})" class="bg-red-500 text-white py-2 px-3 rounded-lg text-sm haptic">\n                                ❌\n                            </button>\n                        </div>\n                    </div>\n                `)).join("")}}function hideSmartScheduler(){document.getElementById("smartSchedulerModal").classList.remove("active")}function acceptSuggestion(e){const t=mobileSystem.currentAISuggestions[e];if(!t)return;const i={id:Date.now(),text:t.text,date:t.date,time:t.time,category:t.category,priority:t.priority,location:t.location,created:(new Date).toISOString(),notified:!1,completed:!1};mobileSystem.reminders.push(i),mobileSystem.saveData(),mobileSystem.renderReminders(),mobileSystem.updateStats(),mobileSystem.showNotification("✅","Accepté","Rappel ajouté avec succès!");const n=document.getElementById("smartSuggestions").children[e];n&&(n.style.opacity="0.5",n.style.pointerEvents="none")}function editSuggestion(e){const t=mobileSystem.currentAISuggestions[e];t&&(document.getElementById("reminderText").value=t.text,document.getElementById("reminderDate").value=t.date,document.getElementById("reminderTime").value=t.time,document.getElementById("reminderCategory").value=t.category,document.getElementById("reminderPriority").value=t.priority,document.getElementById("reminderLocation").value=t.location||"",hideSmartScheduler(),showAddModal())}function rejectSuggestion(e){const t=document.getElementById("smartSuggestions").children[e];t&&(t.style.display="none"),mobileSystem.showNotification("❌","Rejeté","Suggestion supprimée")}function acceptAllSuggestions(){if(!mobileSystem.currentAISuggestions||0===mobileSystem.currentAISuggestions.length)return void mobileSystem.showNotification("❌","Erreur","Aucune suggestion à accepter");let e=0;mobileSystem.currentAISuggestions.forEach(((t,i)=>{setTimeout((()=>{const n={id:Date.now()+i,text:t.text,date:t.date,time:t.time,category:t.category,priority:t.priority,location:t.location,created:(new Date).toISOString(),notified:!1,completed:!1};mobileSystem.reminders.push(n),e++}),100*i)})),setTimeout((()=>{mobileSystem.saveData(),mobileSystem.renderReminders(),mobileSystem.updateStats(),mobileSystem.showNotification("🎉","Succès",`${e} rappels ajoutés!`),hideSmartScheduler()}),100*mobileSystem.currentAISuggestions.length+200)}function customizeSchedule(){mobileSystem.showNotification("⚙️","Personnalisation","Fonctionnalité en développement...")}function toggleWhatsAppFields(){const e=document.getElementById("whatsappMethod").value,t=document.getElementById("businessFields"),i=document.getElementById("twilioFields"),n=document.getElementById("webInstructions"),s=document.getElementById("businessInstructions"),o=document.getElementById("twilioInstructions");t.classList.add("hidden"),i.classList.add("hidden"),n.classList.add("hidden"),s.classList.add("hidden"),o.classList.add("hidden"),"business"===e?(t.classList.remove("hidden"),s.classList.remove("hidden")):"twilio"===e?(i.classList.remove("hidden"),o.classList.remove("hidden")):n.classList.remove("hidden")}function toggleRecurringOptions(){const e=document.getElementById("isRecurring").checked,t=document.getElementById("recurringOptions");e?(t.classList.remove("hidden"),updateRecurringPreview()):t.classList.add("hidden")}function updateRecurringOptions(){const e=document.getElementById("recurringType").value,t=document.getElementById("weeklyOptions"),i=document.getElementById("customOptions");t.classList.add("hidden"),i.classList.add("hidden"),"weekly"===e?t.classList.remove("hidden"):"custom"===e&&i.classList.remove("hidden"),updateRecurringPreview()}function toggleAdvanceOptions(){const e=document.getElementById("advanceNotice").checked,t=document.getElementById("advanceOptions");e?t.classList.remove("hidden"):t.classList.add("hidden")}function updateRecurringPreview(){const e=document.getElementById("previewList"),t=document.getElementById("recurringType").value,i=new Date(document.getElementById("reminderDate").value+"T"+document.getElementById("reminderTime").value);if(!document.getElementById("reminderDate").value)return void(e.innerHTML='<div class="text-gray-400">Sélectionnez d\'abord une date</div>');const n=[];let s=new Date(i);for(let e=0;e<5;e++){if("daily"===t)s.setDate(s.getDate()+(0===e?0:1));else if("weekly"===t)Array.from(document.querySelectorAll(".recurring-days:checked")).map((e=>parseInt(e.value))).length,s.setDate(s.getDate()+(0===e?0:7));else if("monthly"===t)s.setMonth(s.getMonth()+(0===e?0:1));else if("yearly"===t)s.setFullYear(s.getFullYear()+(0===e?0:1));else if("custom"===t){const t=parseInt(document.getElementById("customInterval").value)||1,i=document.getElementById("customUnit").value;e>0&&("days"===i?s.setDate(s.getDate()+t):"weeks"===i?s.setDate(s.getDate()+7*t):"months"===i?s.setMonth(s.getMonth()+t):"years"===i&&s.setFullYear(s.getFullYear()+t))}n.push(`${s.toLocaleDateString("fr-FR")} à ${s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`),s=new Date(s)}e.innerHTML=n.map((e=>`<div>• ${e}</div>`)).join("")}function hideAddModal(){document.getElementById("addModal").classList.remove("active")}function switchTab(e){document.querySelectorAll(".nav-item").forEach((e=>{e.classList.remove("active")})),event.target.closest(".nav-item").classList.add("active");const t=document.getElementById("remindersList"),i=document.getElementById("emptyState"),n=document.getElementById("settingsPage"),s=document.getElementById("statsPage");t.style.display="none",i.style.display="none",n.classList.add("hidden"),s.classList.add("hidden"),"settings"===e?n.classList.remove("hidden"):"stats"===e?(s.classList.remove("hidden"),mobileSystem.renderStats()):(t.style.display="block",mobileSystem.currentTab=e,mobileSystem.renderReminders()),navigator.vibrate&&navigator.vibrate(30)}function saveSettings(){mobileSystem.saveSettings()}function testWhatsApp(){mobileSystem.testWhatsApp()}function testCallMeBot(){mobileSystem.testCallMeBot()}function testCallBot(){mobileSystem.testCallBot()}function getLocation(){"geolocation"in navigator?(mobileSystem.showNotification("📍","Position","Récupération en cours..."),navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:i}=e.coords;document.getElementById("reminderLocation").value=`${t.toFixed(4)}, ${i.toFixed(4)}`,mobileSystem.showNotification("✅","Position","Position récupérée!")}),(e=>{mobileSystem.showNotification("❌","Erreur","Impossible de récupérer la position")}))):mobileSystem.showNotification("❌","Erreur","Géolocalisation non supportée")}function hideNotification(){mobileSystem.hideNotification()}function selectCategoryColor(e){document.querySelectorAll(".color-option").forEach((e=>{e.classList.remove("selected")})),document.querySelector(`[data-color="${e}"]`).classList.add("selected"),document.getElementById("selectedCategoryColor").value=e,navigator.vibrate&&navigator.vibrate(30)}function addCustomCategory(){const e=document.getElementById("newCategoryName").value.trim(),t=document.getElementById("newCategoryIcon").value.trim(),i=document.getElementById("selectedCategoryColor").value;e?t?mobileSystem.addCustomCategory(e,t,i)&&(document.getElementById("newCategoryName").value="",document.getElementById("newCategoryIcon").value="",document.getElementById("selectedCategoryColor").value="blue",document.querySelectorAll(".color-option").forEach((e=>{e.classList.remove("selected")})),document.querySelector('[data-color="blue"]').classList.add("selected")):mobileSystem.showNotification("❌","Erreur","Veuillez saisir un emoji/icône"):mobileSystem.showNotification("❌","Erreur","Veuillez saisir un nom de catégorie")}function filterStats(e){document.querySelectorAll(".stats-filter-btn").forEach((e=>{e.classList.remove("active","bg-blue-500","text-white"),e.classList.add("bg-gray-200","text-gray-700")})),event.target.classList.remove("bg-gray-200","text-gray-700"),event.target.classList.add("active","bg-blue-500","text-white"),mobileSystem.renderStatsTable(e),navigator.vibrate&&navigator.vibrate(30)}function exportStats(){try{const e=[...mobileSystem.reminders,...mobileSystem.completedReminders],t={exportDate:(new Date).toISOString(),totalReminders:e.length,activeReminders:mobileSystem.reminders.length,completedReminders:mobileSystem.completedReminders.length,messageStats:mobileSystem.messageStats,reminders:e.map((e=>({text:e.text,date:e.date,time:e.time,category:e.category,priority:e.priority,location:e.location,created:e.created,completed:e.completed,notified:e.notified,sentVia:e.sentVia,sentAt:e.sentAt})))},i=JSON.stringify(t,null,2),n=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download=`RemindPro-Stats-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),mobileSystem.showNotification("📊","Export","Statistiques exportées avec succès!"),navigator.vibrate&&navigator.vibrate([100,50,100])}catch(e){console.error("Export error:",e),mobileSystem.showNotification("❌","Erreur","Échec de l'export des statistiques")}}function resetStats(){confirm("⚠️ ATTENTION ⚠️\n\nVoulez-vous vraiment remettre à zéro toutes les statistiques ?\n\nCette action supprimera :\n- Tous les rappels terminés\n- Toutes les statistiques d'envoi\n- L'historique complet\n\nCette action est IRRÉVERSIBLE !")&&(mobileSystem.completedReminders=[],localStorage.setItem("mobile_completed",JSON.stringify([])),mobileSystem.messageStats={callMeBotSent:0,totalSent:0},localStorage.setItem("mobile_message_stats",JSON.stringify(mobileSystem.messageStats)),mobileSystem.reminders.forEach((e=>{e.notified=!1,e.sentVia=null,e.sentAt=null})),mobileSystem.saveData(),mobileSystem.renderStats(),mobileSystem.updateStats(),mobileSystem.showNotification("🗑️","Reset","Toutes les statistiques ont été remises à zéro"),navigator.vibrate&&navigator.vibrate([200,100,200,100,200]))}function refreshStats(){mobileSystem.renderStats(),mobileSystem.updateStats(),mobileSystem.showNotification("🔄","Actualisé","Statistiques mises à jour!"),navigator.vibrate&&navigator.vibrate(50)}function printStats(){try{const e=window.open("","_blank"),t=[...mobileSystem.reminders,...mobileSystem.completedReminders],i=`\n                    <!DOCTYPE html>\n                    <html>\n                    <head>\n                        <title>RemindPro Max - Statistiques</title>\n                        <style>\n                            body { font-family: Arial, sans-serif; margin: 20px; }\n                            .header { text-align: center; margin-bottom: 30px; }\n                            .stats-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }\n                            .stat-card { border: 1px solid #ddd; padding: 15px; text-align: center; border-radius: 8px; }\n                            .stat-number { font-size: 24px; font-weight: bold; color: #333; }\n                            .stat-label { color: #666; font-size: 14px; }\n                            table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n                            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }\n                            th { background-color: #f5f5f5; font-weight: bold; }\n                            .priority-urgente { background-color: #fee2e2; }\n                            .priority-haute { background-color: #fed7aa; }\n                            .priority-normale { background-color: #fef3c7; }\n                            .priority-basse { background-color: #dcfce7; }\n                            @media print { body { margin: 0; } }\n                        </style>\n                    </head>\n                    <body>\n                        <div class="header">\n                            <h1>📊 ABM Reminder - Rapport Statistiques</h1>\n                            <p>Généré le ${(new Date).toLocaleDateString("fr-FR")} à ${(new Date).toLocaleTimeString("fr-FR")}</p>\n                        </div>\n                        \n                        <div class="stats-summary">\n                            <div class="stat-card">\n                                <div class="stat-number">${t.length}</div>\n                                <div class="stat-label">Total Rappels</div>\n                            </div>\n                            <div class="stat-card">\n                                <div class="stat-number">${t.filter((e=>e.notified||e.sentVia)).length}</div>\n                                <div class="stat-label">Envoyés</div>\n                            </div>\n                            <div class="stat-card">\n                                <div class="stat-number">${mobileSystem.reminders.filter((e=>!e.notified&&!e.completed)).length}</div>\n                                <div class="stat-label">En Attente</div>\n                            </div>\n                            <div class="stat-card">\n                                <div class="stat-number">${mobileSystem.completedReminders.length}</div>\n                                <div class="stat-label">Terminés</div>\n                            </div>\n                        </div>\n                        \n                        <h2>📋 Détail des Rappels</h2>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>Rappel</th>\n                                    <th>Date/Heure</th>\n                                    <th>Catégorie</th>\n                                    <th>Priorité</th>\n                                    <th>Statut Envoi</th>\n                                    <th>Mode</th>\n                                    <th>État</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${t.map((e=>{const t=mobileSystem.getAllCategories().find((t=>t.id===e.category))||{id:"tache",name:"Tâche",icon:"📋"},i=new Date(`${e.date}T${e.time}`),n=i.toLocaleDateString("fr-FR"),s=i.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});let o="En Attente",a="Aucun",r="Actif";return e.completed?r="Terminé":e.sentVia?(o="Envoyé",a="callmebot"===e.sentVia?"CallMeBot":"Navigateur"):e.notified&&(o="Notifié",a="Navigateur"),`\n                                        <tr class="priority-${e.priority}">\n                                            <td>\n                                                <strong>${e.text}</strong>\n                                                ${e.location?`<br><small>📍 ${e.location}</small>`:""}\n                                            </td>\n                                            <td>${n}<br>${s}</td>\n                                            <td>${t.icon} ${t.name}</td>\n                                            <td>${e.priority}</td>\n                                            <td>${o}</td>\n                                            <td>${a}</td>\n                                            <td>${r}</td>\n                                        </tr>\n                                    `})).join("")}\n                            </tbody>\n                        </table>\n                        \n                        <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">\n                            <p>ABM Reminder - Système de Rappels International</p>\n                            <p>Rapport généré automatiquement</p>\n                        </div>\n                    </body>\n                    </html>\n                `;e.document.write(i),e.document.close(),setTimeout((()=>{e.print()}),500),mobileSystem.showNotification("🖨️","Impression","Rapport préparé pour impression!"),navigator.vibrate&&navigator.vibrate([100,50,100])}catch(e){console.error("Print error:",e),mobileSystem.showNotification("❌","Erreur","Échec de la préparation d'impression")}}document.addEventListener("DOMContentLoaded",(function(){["reminderDate","reminderTime","customInterval","customUnit"].forEach((e=>{const t=document.getElementById(e);t&&t.addEventListener("change",updateRecurringPreview)})),document.addEventListener("change",(function(e){e.target.classList.contains("recurring-days")&&updateRecurringPreview()}));const e=document.getElementById("timezone");e&&e.addEventListener("change",(function(){window.mobileSystem&&(window.mobileSystem.settings.timezone=this.value,window.mobileSystem.updateCurrentTime())}))}));const mobileSystem=new MobileRemindSystem;let deferredPrompt;document.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{const e=document.querySelector('[data-color="blue"]');e&&e.classList.add("selected")}),100)})),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission();const installButton=document.getElementById("installButton"),installPrompt=document.getElementById("installPrompt");function showIOSInstallInstructions(){const e=/iPad|iPhone|iPod/.test(navigator.userAgent),t=!0===window.navigator.standalone;e&&!t&&setTimeout((()=>{mobileSystem.showNotification("🍎","iOS Installation","Appuyez sur le bouton Partager puis \"Sur l'écran d'accueil\" pour installer l'app")}),3e3)}window.addEventListener("beforeinstallprompt",(e=>{console.log("💡 PWA: beforeinstallprompt event fired"),e.preventDefault(),deferredPrompt=e,installPrompt.classList.remove("hidden"),setTimeout((()=>{mobileSystem.showNotification("📱","Installation","Vous pouvez installer cette app sur votre écran d'accueil !")}),2e3)})),installButton.addEventListener("click",(async()=>{if(console.log("📱 PWA: Install button clicked"),!deferredPrompt)return void mobileSystem.showNotification("📱","Installation","Ajoutez ABM Reminder à votre écran d'accueil via le menu de votre navigateur");installPrompt.classList.add("hidden"),deferredPrompt.prompt();const{outcome:e}=await deferredPrompt.userChoice;console.log(`👤 PWA: User response to the install prompt: ${e}`),"accepted"===e?(mobileSystem.showNotification("🎉","Installé !","ABM Reminder a été ajouté à votre écran d'accueil !"),navigator.vibrate&&navigator.vibrate([100,50,100,50,200])):mobileSystem.showNotification("📱","Installation","Vous pouvez installer l'app plus tard via le menu"),deferredPrompt=null})),window.addEventListener("appinstalled",(e=>{console.log("✅ PWA: App was installed successfully"),installPrompt.classList.add("hidden"),mobileSystem.showNotification("🎉","Succès !","ABM Reminder est maintenant installé sur votre appareil !"),deferredPrompt=null,navigator.vibrate&&navigator.vibrate([200,100,200,100,300])})),window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches&&(console.log("🚀 PWA: App is running in standalone mode"),installPrompt.classList.add("hidden"),setTimeout((()=>{mobileSystem.showNotification("🚀","App Installée","Bienvenue dans ABM Reminder installé !")}),1e3)),!0===window.navigator.standalone&&(console.log("🍎 PWA: App is running in iOS standalone mode"),installPrompt.classList.add("hidden")),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{const e=new Blob(["\n                    const CACHE_NAME = 'remindpro-max-v1';\n                    const urlsToCache = [\n                        '/',\n                        'https://cdn.tailwindcss.com'\n                    ];\n                    \n                    self.addEventListener('install', (event) => {\n                        console.log('SW: Install event');\n                        event.waitUntil(\n                            caches.open(CACHE_NAME)\n                                .then((cache) => {\n                                    console.log('SW: Opened cache');\n                                    return cache.addAll(urlsToCache);\n                                })\n                        );\n                    });\n                    \n                    self.addEventListener('fetch', (event) => {\n                        event.respondWith(\n                            caches.match(event.request)\n                                .then((response) => {\n                                    if (response) {\n                                        return response;\n                                    }\n                                    return fetch(event.request);\n                                })\n                        );\n                    });\n                "],{type:"application/javascript"}),t=URL.createObjectURL(e);navigator.serviceWorker.register(t).then((e=>{console.log("✅ SW: Registration successful",e.scope)})).catch((e=>{console.log("❌ SW: Registration failed",e)}))})),showIOSInstallInstructions(),document.getElementById("addModal").addEventListener("click",(e=>{e.target===e.currentTarget&&hideAddModal()}));const modal=document.getElementById("addModal"),observer=new MutationObserver((e=>{e.forEach((e=>{"class"===e.attributeName&&(modal.classList.contains("active")?document.body.style.overflow="hidden":document.body.style.overflow="")}))}));observer.observe(modal,{attributes:!0})</script><script>!function(){function e(){var e=t.contentDocument||t.contentWindow.document;if(e){var n=e.createElement("script");n.innerHTML="window.__CF$cv$params={r:'97fbea4651ccd1c0',t:'MTc1Nzk3OTA2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);",e.getElementsByTagName("head")[0].appendChild(n)}}if(document.body){var t=document.createElement("iframe");if(t.height=1,t.width=1,t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.border="none",t.style.visibility="hidden",document.body.appendChild(t),"loading"!==document.readyState)e();else if(window.addEventListener)document.addEventListener("DOMContentLoaded",e);else{var n=document.onreadystatechange||function(){};document.onreadystatechange=function(t){n(t),"loading"!==document.readyState&&(document.onreadystatechange=n,e())}}}}()</script>

